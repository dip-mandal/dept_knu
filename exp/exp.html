<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSE Data Science & MCA Department Portal</title>
    <meta name="description" content="Department of Computer Science & Engineering - Data Science and MCA programs. Student projects, faculty, events and more.">
    <meta name="keywords" content="CSE, Data Science, MCA, Computer Science, Engineering, University, Department Portal">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Icons (Font Awesome 6) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <style>
        /* ===== CSS RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Light theme variables - SET AS DEFAULT */
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --warning-color: #f9c74f;
            --error-color: #f94144;
            
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --text-muted: #6c757d;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            
            --border-color: #dee2e6;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            
            --font-primary: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            
            --transition: all 0.3s ease;
            --border-radius: 8px;
            --border-radius-lg: 12px;
        }

        /* Apply light theme by default */
        body {
            font-family: var(--font-primary);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
            overflow-x: hidden;
        }

        /* Dark theme overrides */
        body.dark-theme {
            --primary-color: #4895ef;
            --secondary-color: #560bad;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --warning-color: #f9c74f;
            --error-color: #f94144;
            
            --text-primary: #f8f9fa;
            --text-secondary: #e9ecef;
            --text-muted: #adb5bd;
            
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-tertiary: #2d2d2d;
            
            --border-color: #404040;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== TYPOGRAPHY ===== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 0.5rem;
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        a:hover {
            color: var(--secondary-color);
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 500;
            font-size: 0.9rem;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            outline: none;
            gap: 0.5rem;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-large {
            padding: 1rem 2rem;
            font-size: 1rem;
        }

        .btn-danger {
            background-color: var(--error-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d32f2f;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #2196f3;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* ===== LOADING SCREEN ===== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-content {
            text-align: center;
        }

        .loading-logo {
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }

        .loading-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--text-secondary);
        }

        .loading-bar {
            width: 200px;
            height: 4px;
            background-color: var(--bg-tertiary);
            border-radius: 2px;
            overflow: hidden;
            margin: 0 auto;
        }

        .loading-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            animation: loading 1.5s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ===== NAVIGATION ===== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: transparent;
            z-index: 1000;
            transition: var(--transition);
        }

        .navbar.scrolled {
            background-color: var(--bg-primary);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
        }

        body.dark-theme .navbar.scrolled {
            background-color: rgba(18, 18, 18, 0.95);
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-logo {
            height: 40px;
            width: auto;
        }

        .brand-text {
            display: flex;
            flex-direction: column;
        }

        .brand-name {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-primary);
        }

        .brand-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary-color);
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background-color: var(--bg-tertiary);
            color: var(--primary-color);
            transform: rotate(30deg);
        }

        .auth-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .user-avatar:hover {
            border-color: var(--primary-color);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-status {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: 2px solid var(--bg-primary);
        }

        .user-status.online {
            background-color: var(--success-color);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 250px;
            background-color: var(--bg-primary);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            padding: 1rem;
            margin-top: 0.5rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 1001;
            border: 1px solid var(--border-color);
        }

        .user-menu:hover .user-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-info {
            padding-bottom: 0.5rem;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .dropdown-divider {
            height: 1px;
            background-color: var(--border-color);
            margin: 0.5rem 0;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .dropdown-item:hover {
            color: var(--primary-color);
            padding-left: 0.25rem;
        }

        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            gap: 6px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .mobile-menu-toggle span {
            width: 25px;
            height: 2px;
            background-color: var(--text-secondary);
            transition: var(--transition);
            border-radius: 2px;
        }

        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
            transform: translateX(-10px);
        }

        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            margin-top: 80px;
            min-height: calc(100vh - 200px);
        }

        .content-section,
        .dashboard-section {
            display: none;
        }

        .content-section.active,
        .dashboard-section.active {
            display: block;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* ===== DASHBOARD STYLES ===== */
        .dashboard-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }

        .dashboard-header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .dashboard-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-stat-card {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .dashboard-stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .dashboard-stat-card i {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .stat-content {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .dashboard-sidebar {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            height: fit-content;
            border: 1px solid var(--border-color);
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 0.5rem;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-weight: 500;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: var(--bg-tertiary);
            color: var(--primary-color);
        }

        .dashboard-content {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            border: 1px solid var(--border-color);
        }

        .dashboard-section-card {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .dashboard-section-card h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .content-header h2 {
            margin: 0;
        }

        /* ===== TABLE STYLES ===== */
        .table-container {
            overflow-x: auto;
            margin: 1rem 0;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .data-table th {
            background-color: var(--bg-tertiary);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .data-table tr:hover {
            background-color: var(--bg-tertiary);
        }

        .table-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .user-avatar-small {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .badge-success {
            background-color: rgba(76, 201, 240, 0.2);
            color: var(--success-color);
        }

        .badge-warning {
            background-color: rgba(249, 199, 79, 0.2);
            color: var(--warning-color);
        }

        .badge-danger {
            background-color: rgba(249, 65, 68, 0.2);
            color: var(--error-color);
        }

        .badge-info {
            background-color: rgba(67, 97, 238, 0.2);
            color: var(--primary-color);
        }

        /* ===== CARD STYLES ===== */
        .card {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ===== CHART CONTAINERS ===== */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1rem 0;
        }

        /* ===== SEARCH & FILTER BAR ===== */
        .search-filter-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
        }

        .search-box input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .filter-select {
            min-width: 150px;
        }

        .filter-select select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
        }

        .filter-select select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* ===== PAGINATION ===== */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .pagination button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            min-width: 40px;
        }

        .pagination button:hover:not(:disabled) {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination button.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ===== FORM STYLES ===== */
        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .form-section {
            background-color: var(--bg-primary);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        .form-section h3 {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-primary);
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .form-group input[readonly] {
            background-color: var(--bg-tertiary);
            cursor: not-allowed;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .text-muted {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }

        /* ===== HERO SECTION ===== */
        .hero-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding: 2rem 0;
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .hero-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(var(--primary-color) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.1;
        }

        .hero-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, var(--border-color) 1px, transparent 1px),
                linear-gradient(to bottom, var(--border-color) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.05;
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .hero-title {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .title-line {
            display: block;
            font-weight: 300;
            color: var(--text-secondary);
        }

        .title-highlight {
            display: block;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .title-subtitle {
            display: block;
            font-size: 1.5rem;
            color: var(--accent-color);
            margin-top: 0.5rem;
            font-weight: 500;
        }

        .hero-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            line-height: 1;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hero-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .hero-visual {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .hero-card {
            position: relative;
            width: 300px;
            height: 400px;
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .card-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--primary-color) 0%, transparent 70%);
            opacity: 0.1;
            animation: rotate-glow 10s linear infinite;
        }

        @keyframes rotate-glow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .card-content {
            position: relative;
            z-index: 1;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tech-icons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            text-align: center;
        }

        .tech-icons i {
            font-size: 2rem;
            color: var(--primary-color);
            transition: var(--transition);
        }

        .tech-icons i:hover {
            color: var(--accent-color);
            transform: scale(1.2);
        }

        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            animation: bounce 2s infinite;
        }

        .scroll-mouse {
            width: 30px;
            height: 50px;
            border: 2px solid var(--text-muted);
            border-radius: 15px;
            position: relative;
        }

        .scroll-wheel {
            width: 4px;
            height: 10px;
            background-color: var(--text-muted);
            border-radius: 2px;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            animation: scroll 2s infinite;
        }

        @keyframes scroll {
            0% { top: 10px; opacity: 0; }
            50% { opacity: 1; }
            100% { top: 30px; opacity: 0; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }

        /* ===== ABOUT SECTION ===== */
        .about-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .about-card {
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .about-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .card-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .about-card h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .about-card p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .programs-section {
            margin-top: 4rem;
        }

        .programs-title {
            text-align: center;
            margin-bottom: 3rem;
            font-size: 2rem;
            color: var(--text-primary);
        }

        .programs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .program-card {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .program-header {
            background-color: var(--primary-color);
            color: white;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .program-header i {
            font-size: 2rem;
        }

        .program-header h4 {
            margin: 0;
            font-size: 1.3rem;
        }

        .program-details {
            padding: 2rem;
        }

        .program-details p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .program-details ul {
            list-style: none;
            margin-bottom: 2rem;
        }

        .program-details li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
            position: relative;
            padding-left: 1.5rem;
        }

        .program-details li::before {
            content: '▸';
            color: var(--primary-color);
            position: absolute;
            left: 0;
        }

        .program-stats {
            display: flex;
            justify-content: space-between;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }

        .program-stats span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* ===== FACULTY SECTION ===== */
        .faculty-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .faculty-card {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .faculty-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .faculty-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .faculty-info {
            padding: 1.5rem;
        }

        .faculty-name {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .faculty-designation {
            color: var(--primary-color);
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .faculty-qualification {
            color: var(--text-muted);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .faculty-expertise {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .expertise-tag {
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .faculty-social {
            display: flex;
            gap: 1rem;
        }

        .faculty-social a {
            color: var(--text-muted);
            transition: var(--transition);
        }

        .faculty-social a:hover {
            color: var(--primary-color);
        }

        /* ===== PROJECTS SECTION ===== */
        .projects-filter {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1.5rem;
            background-color: var(--bg-secondary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        .project-card {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .project-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .project-info {
            padding: 1.5rem;
        }

        .project-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .project-category {
            color: var(--primary-color);
            font-weight: 500;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .project-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tech-tag {
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .project-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .project-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .project-link:hover {
            color: var(--secondary-color);
        }

        .project-status {
            margin-bottom: 1rem;
        }

        /* ===== EVENTS SECTION ===== */
        .events-container {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .events-tabs {
            display: flex;
            background-color: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 1rem 2rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .tab-btn:hover,
        .tab-btn.active {
            color: var(--primary-color);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
        }

        .events-content {
            padding: 2rem;
        }

        .events-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .event-card {
            display: grid;
            grid-template-columns: 100px 1fr;
            gap: 1.5rem;
            padding: 1.5rem;
            background-color: var(--bg-primary);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .event-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow);
        }

        .event-date {
            text-align: center;
        }

        .event-day {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }

        .event-month {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        .event-details h4 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .event-time,
        .event-location {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .event-description {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .event-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* ===== TOPPERS SECTION ===== */
        .toppers-filter {
            display: flex;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .toppers-filter select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            min-width: 200px;
            cursor: pointer;
        }

        .toppers-filter select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .toppers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .topper-card {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
        }

        .topper-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .topper-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: var(--accent-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            z-index: 1;
        }

        .topper-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 2rem auto 1rem;
            border: 4px solid var(--primary-color);
        }

        .topper-info {
            padding: 1.5rem;
        }

        .topper-name {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .topper-course {
            color: var(--primary-color);
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .topper-cgpa {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .topper-achievements {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .topper-social {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .topper-social a {
            color: var(--text-muted);
            transition: var(--transition);
        }

        .topper-social a:hover {
            color: var(--primary-color);
        }

        /* ===== CONTACT SECTION ===== */
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .contact-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .contact-card {
            background-color: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .contact-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .contact-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .contact-card h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .contact-card p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin: 0;
        }

        .contact-form-container {
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* ===== MODAL STYLES ===== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            padding: 1rem;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius-lg);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: translateY(-20px);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            background-color: var(--bg-primary);
            z-index: 1;
        }

        .modal-header h3 {
            margin: 0;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background-color: var(--bg-tertiary);
            color: var(--error-color);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .text-center {
            text-align: center;
        }

        /* Auth Forms */
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .checkbox-label,
        .radio-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .checkbox-label input,
        .radio-label input {
            display: none;
        }

        .checkmark {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .checkbox-label input:checked + .checkmark {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .checkbox-label input:checked + .checkmark::after {
            content: '✓';
            color: white;
            font-size: 12px;
        }

        .radio-custom {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .radio-label input:checked + .radio-custom {
            border-color: var(--primary-color);
        }

        .radio-label input:checked + .radio-custom::after {
            content: '';
            width: 8px;
            height: 8px;
            background-color: var(--primary-color);
            border-radius: 50%;
        }

        .radio-group {
            display: flex;
            gap: 1rem;
        }

        .forgot-password {
            font-size: 0.9rem;
            color: var(--primary-color);
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .auth-divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1.5rem 0;
            color: var(--text-muted);
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background-color: var(--border-color);
        }

        /* File Upload - Simplified Version */
        .image-upload-container {
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .image-upload-container.dragover {
            border-color: var(--primary-color);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .upload-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            color: var(--text-muted);
        }

        .upload-placeholder i {
            font-size: 3rem;
            color: var(--primary-color);
        }

        .upload-placeholder p {
            margin: 0;
        }

        .image-preview-container {
            position: relative;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
        }

        #image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: var(--border-radius);
            display: none;
            margin: 0 auto;
        }

        .crop-container {
            display: none;
            margin-top: 20px;
            width: 100%;
        }

        #crop-canvas {
            max-width: 100%;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-secondary);
            cursor: crosshair;
        }

        .crop-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .crop-btn {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .crop-btn:hover {
            background-color: var(--bg-tertiary);
        }

        .crop-btn.primary {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .crop-btn.primary:hover {
            background-color: var(--secondary-color);
        }

        /* Avatar Upload */
        .avatar-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .avatar-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary-color);
        }

        .avatar-upload-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        /* Verification Modal */
        .verification-content {
            text-align: center;
        }

        .verification-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .verification-form {
            margin: 2rem 0;
        }

        .otp-input-group {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .otp-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.5rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .otp-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .resend-section {
            margin-top: 1.5rem;
        }

        .resend-section p {
            margin-bottom: 0.5rem;
            color: var(--text-muted);
        }

        /* Success & Error Modals */
        .success-icon,
        .error-icon,
        .confirm-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .success-icon {
            color: var(--success-color);
        }

        .error-icon {
            color: var(--error-color);
        }

        .confirm-icon {
            color: var(--warning-color);
        }

        .confirm-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        /* ===== TOAST NOTIFICATIONS ===== */
        .toast-container {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 2001;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toast {
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 300px;
            max-width: 400px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast.success {
            border-left: 4px solid var(--success-color);
        }

        .toast.error {
            border-left: 4px solid var(--error-color);
        }

        .toast.warning {
            border-left: 4px solid var(--warning-color);
        }

        .toast.info {
            border-left: 4px solid var(--primary-color);
        }

        .toast-icon {
            font-size: 1.25rem;
        }

        .toast.success .toast-icon {
            color: var(--success-color);
        }

        .toast.error .toast-icon {
            color: var(--error-color);
        }

        .toast.warning .toast-icon {
            color: var(--warning-color);
        }

        .toast.info .toast-icon {
            color: var(--primary-color);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .toast-message {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1.1rem;
            transition: var(--transition);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toast-close:hover {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        /* ===== FOOTER ===== */
        .footer {
            background-color: var(--bg-secondary);
            padding: 3rem 0 1rem;
            margin-top: 5rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-brand {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .footer-logo {
            height: 50px;
            width: auto;
        }

        .footer-description {
            margin-bottom: 1.5rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .social-link:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-3px);
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-links a {
            color: var(--text-muted);
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary-color);
            padding-left: 5px;
        }

        .footer-divider {
            height: 1px;
            background-color: var(--border-color);
            margin-bottom: 1.5rem;
        }

        .footer-bottom-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-bottom-links {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .footer-bottom-links a {
            color: var(--text-muted);
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .footer-bottom-links a:hover {
            color: var(--primary-color);
        }

        /* ===== LOADING PLACEHOLDER ===== */
        .loading-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            color: var(--text-muted);
            grid-column: 1 / -1;
        }

        .loading-placeholder i {
            font-size: 2rem;
            margin-bottom: 1rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== PROFILE HEADER ===== */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
        }

        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-color);
        }

        .profile-info h2 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .profile-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .profile-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .detail-group {
            background-color: var(--bg-primary);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .detail-group h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--text-muted);
            font-weight: 500;
        }

        .detail-value {
            color: var(--text-primary);
            text-align: right;
        }

        .achievements-list,
        .publications-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .achievement-item,
        .publication-item {
            padding: 1rem;
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .achievement-item h5,
        .publication-item h5 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .achievement-item p,
        .publication-item p {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .achievement-item small {
            color: var(--text-muted);
        }

        .list-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .list-item {
            padding: 1rem;
            background-color: var(--bg-primary);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .list-item h4 {
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .list-item p {
            margin-bottom: 0.25rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .list-item small {
            color: var(--text-muted);
        }

        .view-all-btn {
            width: 100%;
        }

        /* ===== ADMIN SPECIFIC STYLES ===== */
        .admin-card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .admin-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            transition: var(--transition);
        }

        .admin-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .admin-card i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .admin-card .number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .admin-card .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .notice-card {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 1rem;
            transition: var(--transition);
        }

        .notice-card.important {
            border-left: 4px solid var(--accent-color);
        }

        .notice-card h4 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .notice-meta {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .message-card {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 1rem;
            transition: var(--transition);
        }

        .message-card.unread {
            border-left: 4px solid var(--primary-color);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .message-header h4 {
            margin: 0;
            color: var(--text-primary);
        }

        .message-date {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 4rem;
            }

            .hero-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .hero-actions {
                justify-content: center;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-sidebar {
                position: fixed;
                top: 80px;
                left: 0;
                width: 100%;
                height: auto;
                z-index: 100;
                display: none;
                border-radius: 0;
                margin: 0;
                max-height: calc(100vh - 80px);
                overflow-y: auto;
            }

            .dashboard-sidebar.active {
                display: block;
            }

            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .nav-menu {
                position: fixed;
                top: 80px;
                left: 0;
                width: 100%;
                background-color: var(--bg-primary);
                flex-direction: column;
                padding: 2rem;
                box-shadow: var(--shadow);
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
                transition: var(--transition);
                border-bottom: 1px solid var(--border-color);
                max-height: calc(100vh - 80px);
                overflow-y: auto;
            }

            .nav-menu.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }

            .mobile-menu-toggle {
                display: flex;
            }

            .contact-grid {
                grid-template-columns: 1fr;
            }

            .contact-info {
                grid-template-columns: 1fr;
            }

            .programs-grid {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 1rem;
            }

            .brand-text {
                display: none;
            }

            .footer-bottom-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-bottom-links {
                justify-content: center;
            }

            .section-title {
                font-size: 2rem;
            }

            .hero-title {
                font-size: 2.2rem;
            }

            .title-subtitle {
                font-size: 1.2rem;
            }

            .hero-stats {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .stat-number {
                font-size: 2rem;
            }

            .hero-actions {
                flex-direction: column;
                align-items: center;
            }

            .hero-actions .btn {
                width: 100%;
            }

            .hero-card {
                width: 250px;
                height: 350px;
            }

            .tech-icons {
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
            }

            .tech-icons i {
                font-size: 1.5rem;
            }

            .projects-grid,
            .faculty-grid,
            .toppers-grid {
                grid-template-columns: 1fr;
            }

            .event-card {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .event-date {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
            }

            .event-actions {
                justify-content: center;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .dashboard-stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .admin-card-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .message-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media (max-width: 576px) {
            .hero-content {
                padding: 0 1rem;
            }

            .hero-title {
                font-size: 1.8rem;
            }

            .about-grid {
                grid-template-columns: 1fr;
            }

            .events-tabs {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
                text-align: center;
            }

            .tab-btn.active::after {
                display: none;
            }

            .toppers-filter {
                flex-direction: column;
                align-items: stretch;
            }

            .toppers-filter select {
                width: 100%;
            }

            .auth-buttons {
                display: none;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .form-options {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .otp-input-group {
                gap: 0.25rem;
            }

            .otp-input {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .toast {
                min-width: auto;
                width: calc(100vw - 2rem);
                margin: 0 1rem;
            }

            .dashboard-stats-grid {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column;
            }

            .form-actions .btn {
                width: 100%;
            }

            .admin-card-grid {
                grid-template-columns: 1fr;
            }

            .search-filter-bar {
                flex-direction: column;
            }

            .search-box, .filter-select {
                min-width: 100%;
            }

            .table-actions {
                flex-direction: column;
            }

            .table-actions .btn {
                width: 100%;
            }

            .pagination {
                gap: 0.25rem;
            }

            .pagination button {
                padding: 0.4rem 0.8rem;
            }

            .event-actions {
                flex-direction: column;
            }

            .event-actions .btn {
                width: 100%;
            }

            .programs-grid {
                grid-template-columns: 1fr;
            }

            .program-header {
                flex-direction: column;
                text-align: center;
            }

            .program-stats {
                flex-direction: column;
                gap: 0.5rem;
                align-items: center;
            }
        }
    </style>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="assets/images/logo.png" alt="Department Logo" class="nav-logo" style="height: 260px; width: auto;">
            </div>
            <div class="loading-text">Department Portal</div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <div class="nav-logo">
                    <img src="assets/images/logo.png" alt="Department Logo" class="nav-logo">
                </div>
                <div class="brand-text">
                    <span class="brand-name">CSE Department</span>
                    <span class="brand-subtitle">Data Science & MCA</span>
                </div>
            </div>

            <div class="nav-menu" id="nav-menu">
                <a href="#home" class="nav-link active" data-section="home">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="#about" class="nav-link" data-section="about">
                    <i class="fas fa-info-circle"></i> About
                </a>
                <a href="#faculty" class="nav-link" data-section="faculty">
                    <i class="fas fa-users"></i> Faculty
                </a>
                <a href="#projects" class="nav-link" data-section="projects">
                    <i class="fas fa-project-diagram"></i> Projects
                </a>
                <a href="#events" class="nav-link" data-section="events">
                    <i class="fas fa-calendar-alt"></i> Events
                </a>
                <a href="#toppers" class="nav-link" data-section="toppers">
                    <i class="fas fa-trophy"></i> Toppers
                </a>
                <a href="#contact" class="nav-link" data-section="contact">
                    <i class="fas fa-envelope"></i> Contact
                </a>
                <div class="dashboard-nav" style="display: none;" id="dashboard-nav">
                    <a href="#student-dashboard" class="nav-link" data-section="student-dashboard">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                    <a href="#student-profile" class="nav-link" data-section="student-profile">
                        <i class="fas fa-user"></i> Profile
                    </a>
                    <a href="#student-projects" class="nav-link" data-section="student-projects">
                        <i class="fas fa-code-branch"></i> Projects
                    </a>
                    <a href="#student-achievements" class="nav-link" data-section="student-achievements">
                        <i class="fas fa-trophy"></i> Achievements
                    </a>
                </div>
            </div>

            <div class="nav-controls">
                <!-- Theme Toggle -->
                <button class="theme-toggle" id="theme-toggle" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>

                <!-- Auth Buttons -->
                <div class="auth-buttons" id="auth-buttons">
                    <button class="btn btn-outline" id="login-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                    <button class="btn btn-primary" id="register-btn">
                        <i class="fas fa-user-plus"></i> Register
                    </button>
                </div>

                <!-- User Menu (hidden by default) -->
                <div class="user-menu" id="user-menu" style="display: none;">
                    <div class="user-avatar" id="user-avatar">
                        <img src="https://ui-avatars.com/api/?name=User&background=4361ee&color=fff" alt="User" id="user-avatar-img">
                        <div class="user-status online"></div>
                    </div>
                    <div class="user-dropdown" id="user-dropdown">
                        <div class="user-info">
                            <div class="user-name" id="user-name">User Name</div>
                            <div class="user-role" id="user-role">Student</div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" id="dashboard-link">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a>
                        <a href="#" class="dropdown-item" id="profile-link">
                            <i class="fas fa-user"></i> Profile
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" id="logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </div>

                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section id="home" class="hero-section active">
            <div class="hero-background">
                <div class="hero-particles"></div>
                <div class="hero-grid"></div>
            </div>

            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">
                        <span class="title-line">Department of</span>
                        <span class="title-highlight">Computer Science & Engineering</span>
                        <span class="title-subtitle">Data Science • MCA</span>
                    </h1>
                    <p class="hero-description" id="hero-description">
                        Loading department information...
                    </p>

                    <!-- Stats Count -->
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="count-students" data-count="0">0</div>
                            <div class="stat-label">Students</div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-number" id="count-faculty" data-count="0">0</div>
                            <div class="stat-label">Faculty</div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-number" id="count-projects" data-count="0">0</div>
                            <div class="stat-label">Projects</div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-number" id="count-placement" data-count="0">0</div>
                            <div class="stat-label">Placement %</div>
                        </div>
                    </div>

                    <div class="hero-actions">
                        <button class="btn btn-primary btn-large" id="explore-btn">
                            <i class="fas fa-rocket"></i> Explore Programs
                        </button>
                        <button class="btn btn-outline btn-large" id="student-portal-btn">
                            <i class="fas fa-user-graduate"></i> Student Portal
                        </button>
                    </div>
                </div>

                <div class="hero-visual">
                    <div class="hero-card floating">
                        <div class="card-glow"></div>
                        <div class="card-content">
                            <div class="tech-icons">
                                <i class="fab fa-python"></i>
                                <i class="fas fa-brain"></i>
                                <i class="fab fa-react"></i>
                                <i class="fas fa-database"></i>
                                <i class="fas fa-chart-line"></i>
                                <i class="fab fa-js"></i>
                                <i class="fas fa-robot"></i>
                                <i class="fab fa-github"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scroll Indicator -->
            <div class="scroll-indicator">
                <div class="scroll-mouse">
                    <div class="scroll-wheel"></div>
                </div>
                <span>Scroll to explore</span>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="content-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">About Our Department</h2>
                    <p class="section-subtitle">Excellence in Computer Science Education</p>
                </div>

                <div class="about-grid">
                    <div class="about-card" data-aos="fade-up">
                        <div class="card-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3>Our University</h3>
                        <p id="university-info">Loading university information...</p>
                    </div>

                    <div class="about-card" data-aos="fade-up" data-aos-delay="100">
                        <div class="card-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Our Department</h3>
                        <p id="department-info">Loading department information...</p>
                    </div>

                    <div class="about-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="card-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <h3>Vision</h3>
                        <p id="vision-info">Loading vision...</p>
                    </div>

                    <div class="about-card" data-aos="fade-up" data-aos-delay="300">
                        <div class="card-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <h3>Mission</h3>
                        <p id="mission-info">Loading mission...</p>
                    </div>
                </div>

                <div class="programs-section">
                    <h3 class="programs-title">Our Programs</h3>
                    <div class="programs-grid" id="programs-grid">
                        <!-- Programs will be loaded dynamically -->
                        <div class="loading-placeholder">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading programs...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Faculty Section -->
        <section id="faculty" class="content-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Our Faculty</h2>
                    <p class="section-subtitle">Meet our experienced and dedicated faculty members</p>
                </div>

                <div class="faculty-grid" id="faculty-grid">
                    <!-- Faculty cards will be dynamically loaded -->
                    <div class="loading-placeholder">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading faculty information...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="content-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Student Projects</h2>
                    <p class="section-subtitle">Innovative projects by our talented students</p>
                </div>

                <div class="projects-filter">
                    <button class="filter-btn active" data-filter="all">All Projects</button>
                    <button class="filter-btn" data-filter="Data Science">Data Science</button>
                    <button class="filter-btn" data-filter="Web Development">Web Development</button>
                    <button class="filter-btn" data-filter="Mobile">Mobile Apps</button>
                    <button class="filter-btn" data-filter="AI/ML">AI/ML</button>
                </div>

                <div class="projects-grid" id="projects-grid">
                    <!-- Projects will be dynamically loaded -->
                    <div class="loading-placeholder">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading projects...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="content-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Events & Activities</h2>
                    <p class="section-subtitle">Stay updated with our latest events and activities</p>
                </div>

                <div class="events-container">
                    <div class="events-tabs">
                        <button class="tab-btn active" data-tab="upcoming">Upcoming</button>
                        <button class="tab-btn" data-tab="past">Past Events</button>
                        <button class="tab-btn" data-tab="all">All Events</button>
                    </div>

                    <div class="events-content" id="events-content">
                        <!-- Events will be dynamically loaded -->
                        <div class="loading-placeholder">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading events...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Toppers Section -->
        <section id="toppers" class="content-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Academic Excellence</h2>
                    <p class="section-subtitle">Celebrating our top performers</p>
                </div>

                <div class="toppers-filter">
                    <select id="academic-year-filter">
                        <option value="">Select Academic Year</option>
                    </select>
                    <select id="course-filter">
                        <option value="">All Courses</option>
                        <option value="B.Tech CSE (Data Science)">B.Tech CSE (Data Science)</option>
                        <option value="MCA">MCA</option>
                    </select>
                </div>

                <div class="toppers-grid" id="toppers-grid">
                    <!-- Toppers will be dynamically loaded -->
                    <div class="loading-placeholder">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading toppers...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="content-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Get In Touch</h2>
                    <p class="section-subtitle">Have questions? We'd love to hear from you</p>
                </div>

                <div class="contact-grid">
                    <div class="contact-info" id="contact-info">
                        <!-- Contact info will be loaded dynamically -->
                        <div class="loading-placeholder">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading contact information...</p>
                        </div>
                    </div>

                    <div class="contact-form-container">
                        <form class="contact-form" id="contact-form">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" name="name" required>
                            </div>

                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" name="email" required>
                            </div>

                            <div class="form-group">
                                <label for="subject">Subject</label>
                                <select id="subject" name="subject" required>
                                    <option value="">Select Subject</option>
                                    <option value="admission">Admission Inquiry</option>
                                    <option value="academic">Academic Query</option>
                                    <option value="placement">Placement Assistance</option>
                                    <option value="general">General Information</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" name="message" rows="5" required></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-paper-plane"></i> Send Message
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== STUDENT DASHBOARD SECTIONS ==================== -->

        <!-- Student Dashboard -->
        <section id="student-dashboard" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Student Dashboard</h1>
                    <p>Welcome back, <span id="student-welcome-name">Student</span>!</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar" id="student-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" class="active" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="student-dashboard-content">
                    <div class="dashboard-stats-grid">
                        <div class="dashboard-stat-card">
                            <i class="fas fa-star"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="student-cgpa">--</span>
                                <span class="stat-label">CGPA</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="student-attendance">--</span>
                                <span class="stat-label">Attendance</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-code-branch"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="student-project-count">--</span>
                                <span class="stat-label">Projects</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-calendar-check"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="student-event-count">--</span>
                                <span class="stat-label">Events</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-sections">
                        <div class="dashboard-section-card">
                            <h3>Recent Projects</h3>
                            <div id="recent-projects-list" class="list-container">
                                <!-- Recent projects will be loaded here -->
                            </div>
                            <button class="btn btn-outline view-all-btn" onclick="window.app.showSection('student-projects')">View All Projects</button>
                        </div>

                        <div class="dashboard-section-card">
                            <h3>Upcoming Events</h3>
                            <div id="upcoming-events-list" class="list-container">
                                <!-- Upcoming events will be loaded here -->
                            </div>
                            <button class="btn btn-outline view-all-btn" onclick="window.app.showSection('student-events')">View All Events</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Student Profile -->
        <section id="student-profile" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Student Profile</h1>
                    <p>View and manage your profile information</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" class="active" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="student-profile-content">
                    <!-- Profile content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Student Edit Profile -->
        <section id="student-edit-profile" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Edit Profile</h1>
                    <p>Update your profile information</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" class="active" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content">
                    <div class="form-container">
                        <form id="student-edit-form" enctype="multipart/form-data">
                            <div class="form-section">
                                <h3>Profile Picture</h3>
                                <div class="avatar-upload">
                                    <img id="profile-avatar-preview" src="" alt="Profile" class="avatar-preview">
                                    <div class="avatar-upload-controls">
                                        <input type="file" id="avatar-upload" name="avatar" accept="image/*" hidden>
                                        <button type="button" class="btn btn-outline" onclick="document.getElementById('avatar-upload').click()">
                                            <i class="fas fa-camera"></i> Change Photo
                                        </button>
                                        <p class="text-muted">Max size: 5MB. JPG, PNG, GIF</p>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Personal Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="edit-fullname">Full Name</label>
                                        <input type="text" id="edit-fullname" name="fullName" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-email">Email</label>
                                        <input type="email" id="edit-email" name="email" required readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-phone">Phone Number</label>
                                        <input type="tel" id="edit-phone" name="phone">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-dob">Date of Birth</label>
                                        <input type="date" id="edit-dob" name="dateOfBirth">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-gender">Gender</label>
                                        <select id="edit-gender" name="gender">
                                            <option value="">Select Gender</option>
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-address">Address</label>
                                        <textarea id="edit-address" name="address"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Academic Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="edit-registration">Registration No.</label>
                                        <input type="text" id="edit-registration" name="registrationNo" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-course">Course</label>
                                        <select id="edit-course" name="course">
                                            <option value="">Select Course</option>
                                            <option value="B.Tech CSE (Data Science)">B.Tech CSE (Data Science)</option>
                                            <option value="MCA">MCA</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-year">Year</label>
                                        <select id="edit-year" name="year">
                                            <option value="">Select Year</option>
                                            <option value="1">1st Year</option>
                                            <option value="2">2nd Year</option>
                                            <option value="3">3rd Year</option>
                                            <option value="4">4th Year</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-semester">Semester</label>
                                        <select id="edit-semester" name="semester">
                                            <option value="">Select Semester</option>
                                            <option value="1">1st Semester</option>
                                            <option value="2">2nd Semester</option>
                                            <option value="3">3rd Semester</option>
                                            <option value="4">4th Semester</option>
                                            <option value="5">5th Semester</option>
                                            <option value="6">6th Semester</option>
                                            <option value="7">7th Semester</option>
                                            <option value="8">8th Semester</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-caste">Caste</label>
                                        <input type="text" id="edit-caste" name="caste">
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="cancel-edit">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Student Projects List -->
        <section id="student-projects" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>My Projects</h1>
                    <p>Manage your projects</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" class="active" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="student-projects-content">
                    <div class="content-header">
                        <h2>My Projects</h2>
                        <button class="btn btn-primary" onclick="window.app.showSection('student-add-project')">
                            <i class="fas fa-plus"></i> Add New Project
                        </button>
                    </div>
                    <div class="projects-grid" id="student-projects-grid">
                        <!-- Projects will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Student Add Project -->
        <section id="student-add-project" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Add New Project</h1>
                    <p>Share your project with the department</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" class="active" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content">
                    <div class="form-container">
                        <form id="add-project-form" enctype="multipart/form-data">
                            <div class="form-group">
                                <label for="project-title">Project Title</label>
                                <input type="text" id="project-title" name="title" required>
                            </div>

                            <div class="form-group">
                                <label for="project-description">Description</label>
                                <textarea id="project-description" name="description" rows="5" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="project-category">Category</label>
                                <select id="project-category" name="category" required>
                                    <option value="">Select Category</option>
                                    <option value="Data Science">Data Science</option>
                                    <option value="Web Development">Web Development</option>
                                    <option value="Mobile">Mobile Apps</option>
                                    <option value="AI/ML">AI/ML</option>
                                    <option value="IoT">IoT</option>
                                    <option value="Blockchain">Blockchain</option>
                                    <option value="Cloud Computing">Cloud Computing</option>
                                    <option value="Cybersecurity">Cybersecurity</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="project-technologies">Technologies Used (JSON array)</label>
                                <input type="text" id="project-technologies" name="technologies" value='["Python", "JavaScript", "React"]' 
                                       placeholder='["Python", "React", "Node.js"]'>
                                <p class="text-muted">Enter as JSON array, e.g., ["Python", "Django", "React"]</p>
                            </div>

                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="project-github">GitHub URL</label>
                                    <input type="url" id="project-github" name="github">
                                </div>

                                <div class="form-group">
                                    <label for="project-demo">Demo URL</label>
                                    <input type="url" id="project-demo" name="demo">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="project-image">Project Image</label>
                                <input type="file" id="project-image" name="image" accept="image/*">
                                <p class="text-muted">Optional. Max size: 5MB</p>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" onclick="window.app.showSection('student-projects')">Cancel</button>
                                <button type="submit" class="btn btn-primary">Submit Project</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Student Achievements -->
        <section id="student-achievements" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>My Achievements</h1>
                    <p>Track your accomplishments</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" class="active" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="student-achievements-content">
                    <div class="content-header">
                        <h2>Achievements</h2>
                        <button class="btn btn-primary" onclick="window.app.showAddAchievementModal()">
                            <i class="fas fa-plus"></i> Add Achievement
                        </button>
                    </div>
                    <div class="achievements-grid" id="achievements-grid">
                        <!-- Achievements will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Student My Events -->
        <section id="student-events" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>My Events</h1>
                    <p>Events you've registered for</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#student-dashboard" data-section="student-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#student-profile" data-section="student-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#student-edit-profile" data-section="student-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#student-projects" data-section="student-projects"><i class="fas fa-project-diagram"></i> My Projects</a></li>
                        <li><a href="#student-achievements" data-section="student-achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
                        <li><a href="#student-events" class="active" data-section="student-events"><i class="fas fa-calendar-alt"></i> My Events</a></li>
                        <li><a href="#student-add-project" data-section="student-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="student-events-content">
                    <!-- Events will be loaded here -->
                </div>
            </div>
        </section>

        <!-- ==================== FACULTY DASHBOARD SECTIONS ==================== -->

        <!-- Faculty Dashboard -->
        <section id="faculty-dashboard" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Faculty Dashboard</h1>
                    <p>Welcome back, <span id="faculty-welcome-name">Professor</span>!</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar" id="faculty-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" class="active" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="faculty-dashboard-content">
                    <div class="dashboard-stats-grid">
                        <div class="dashboard-stat-card">
                            <i class="fas fa-users"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="faculty-student-count">0</span>
                                <span class="stat-label">Students</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-code-branch"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="faculty-project-count">0</span>
                                <span class="stat-label">Projects</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-book"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="faculty-publication-count">0</span>
                                <span class="stat-label">Publications</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Faculty Profile -->
        <section id="faculty-profile" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Faculty Profile</h1>
                    <p>View and manage your profile information</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" class="active" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="faculty-profile-content">
                    <!-- Profile content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Faculty Edit Profile -->
        <section id="faculty-edit-profile" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Edit Profile</h1>
                    <p>Update your profile information</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" class="active" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content">
                    <div class="form-container">
                        <form id="faculty-edit-form" enctype="multipart/form-data">
                            <div class="form-section">
                                <h3>Profile Picture</h3>
                                <div class="avatar-upload">
                                    <img id="faculty-avatar-preview" src="" alt="Profile" class="avatar-preview">
                                    <div class="avatar-upload-controls">
                                        <input type="file" id="faculty-avatar-upload" name="avatar" accept="image/*" hidden>
                                        <button type="button" class="btn btn-outline" onclick="document.getElementById('faculty-avatar-upload').click()">
                                            <i class="fas fa-camera"></i> Change Photo
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Personal Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="edit-faculty-name">Full Name</label>
                                        <input type="text" id="edit-faculty-name" name="fullName" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-email">Email</label>
                                        <input type="email" id="edit-faculty-email" name="email" required readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-phone">Phone Number</label>
                                        <input type="tel" id="edit-faculty-phone" name="phone">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-dob">Date of Birth</label>
                                        <input type="date" id="edit-faculty-dob" name="dateOfBirth">
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Professional Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="edit-faculty-designation">Designation</label>
                                        <select id="edit-faculty-designation" name="designation">
                                            <option value="">Select Designation</option>
                                            <option value="HOD">Head of Department</option>
                                            <option value="Professor">Professor</option>
                                            <option value="Associate Professor">Associate Professor</option>
                                            <option value="Assistant Professor">Assistant Professor</option>
                                            <option value="Guest Professor">Guest Professor</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-qualification">Qualification</label>
                                        <input type="text" id="edit-faculty-qualification" name="qualification">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-experience">Experience (Years)</label>
                                        <input type="number" id="edit-faculty-experience" name="experience" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-specialization">Specialization</label>
                                        <input type="text" id="edit-faculty-specialization" name="specialization">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-research">Research Interests</label>
                                        <textarea id="edit-faculty-research" name="researchInterests" rows="3"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-bio">Bio</label>
                                        <textarea id="edit-faculty-bio" name="bio" rows="4"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-office">Office</label>
                                        <input type="text" id="edit-faculty-office" name="office">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-office-hours">Office Hours</label>
                                        <input type="text" id="edit-faculty-office-hours" name="officeHours">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-linkedin">LinkedIn URL</label>
                                        <input type="url" id="edit-faculty-linkedin" name="linkedin">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-faculty-googlescholar">Google Scholar URL</label>
                                        <input type="url" id="edit-faculty-googlescholar" name="googleScholar">
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" id="cancel-faculty-edit">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Faculty Students List -->
        <section id="faculty-students" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Students</h1>
                    <p>View all students</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" class="active" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="faculty-students-content">
                    <!-- Students list will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Faculty Projects List -->
        <section id="faculty-projects" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>My Projects</h1>
                    <p>Projects you've supervised</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" class="active" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="faculty-projects-content">
                    <div class="content-header">
                        <h2>My Projects</h2>
                        <button class="btn btn-primary" onclick="window.app.showSection('faculty-add-project')">
                            <i class="fas fa-plus"></i> Add New Project
                        </button>
                    </div>
                    <div class="projects-grid" id="faculty-projects-grid">
                        <!-- Projects will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Faculty Add Project -->
        <section id="faculty-add-project" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Add New Project</h1>
                    <p>Share your research project</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" class="active" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content">
                    <div class="form-container">
                        <form id="faculty-add-project-form" enctype="multipart/form-data">
                            <div class="form-group">
                                <label for="faculty-project-title">Project Title</label>
                                <input type="text" id="faculty-project-title" name="title" required>
                            </div>

                            <div class="form-group">
                                <label for="faculty-project-description">Description</label>
                                <textarea id="faculty-project-description" name="description" rows="5" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="faculty-project-category">Category</label>
                                <select id="faculty-project-category" name="category" required>
                                    <option value="">Select Category</option>
                                    <option value="Research">Research</option>
                                    <option value="Development">Development</option>
                                    <option value="Innovation">Innovation</option>
                                    <option value="Grant">Grant Project</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="faculty-project-technologies">Technologies Used (JSON array)</label>
                                <input type="text" id="faculty-project-technologies" name="technologies" value='["Python", "TensorFlow", "React"]'>
                            </div>

                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="faculty-project-github">GitHub URL</label>
                                    <input type="url" id="faculty-project-github" name="github">
                                </div>
                                <div class="form-group">
                                    <label for="faculty-project-demo">Demo URL</label>
                                    <input type="url" id="faculty-project-demo" name="demo">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="faculty-project-image">Project Image</label>
                                <input type="file" id="faculty-project-image" name="image" accept="image/*">
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" onclick="window.app.showSection('faculty-projects')">Cancel</button>
                                <button type="submit" class="btn btn-primary">Submit Project</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Faculty Publications List -->
        <section id="faculty-publications" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>My Publications</h1>
                    <p>Manage your research publications</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" class="active" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="faculty-publications-content">
                    <div class="content-header">
                        <h2>Publications</h2>
                        <button class="btn btn-primary" onclick="window.app.showSection('faculty-add-publication')">
                            <i class="fas fa-plus"></i> Add Publication
                        </button>
                    </div>
                    <div class="publications-grid" id="publications-grid">
                        <!-- Publications will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Faculty Add Publication -->
        <section id="faculty-add-publication" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Add Publication</h1>
                    <p>Add a new research publication</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#faculty-dashboard" data-section="faculty-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#faculty-profile" data-section="faculty-profile"><i class="fas fa-user"></i> Profile</a></li>
                        <li><a href="#faculty-edit-profile" data-section="faculty-edit-profile"><i class="fas fa-edit"></i> Edit Profile</a></li>
                        <li><a href="#faculty-students" data-section="faculty-students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li><a href="#faculty-projects" data-section="faculty-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#faculty-publications" data-section="faculty-publications"><i class="fas fa-book"></i> Publications</a></li>
                        <li><a href="#faculty-add-project" data-section="faculty-add-project"><i class="fas fa-plus-circle"></i> Add Project</a></li>
                        <li><a href="#faculty-add-publication" class="active" data-section="faculty-add-publication"><i class="fas fa-plus-circle"></i> Add Publication</a></li>
                    </ul>
                </div>

                <div class="dashboard-content">
                    <div class="form-container">
                        <form id="add-publication-form">
                            <div class="form-group">
                                <label for="publication-title">Title</label>
                                <input type="text" id="publication-title" name="title" required>
                            </div>

                            <div class="form-group">
                                <label for="publication-authors">Authors</label>
                                <input type="text" id="publication-authors" name="authors" required>
                                <p class="text-muted">Separate multiple authors with commas</p>
                            </div>

                            <div class="form-group">
                                <label for="publication-journal">Journal/Conference</label>
                                <input type="text" id="publication-journal" name="journal">
                            </div>

                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="publication-year">Year</label>
                                    <input type="number" id="publication-year" name="year" min="1900" max="2100">
                                </div>
                                <div class="form-group">
                                    <label for="publication-doi">DOI</label>
                                    <input type="text" id="publication-doi" name="doi">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="publication-link">Link</label>
                                <input type="url" id="publication-link" name="link">
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" onclick="window.app.showSection('faculty-publications')">Cancel</button>
                                <button type="submit" class="btn btn-primary">Add Publication</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== ADMIN DASHBOARD SECTIONS ==================== -->

        <!-- Admin Dashboard -->
        <section id="admin-dashboard" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Admin Dashboard</h1>
                    <p>Welcome back, <span id="admin-welcome-name">Administrator</span>!</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar" id="admin-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" class="active" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-dashboard-content">
                    <div class="dashboard-stats-grid">
                        <div class="dashboard-stat-card">
                            <i class="fas fa-users"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="admin-total-users">0</span>
                                <span class="stat-label">Total Users</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-user-graduate"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="admin-total-students">0</span>
                                <span class="stat-label">Students</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="admin-total-teachers">0</span>
                                <span class="stat-label">Teachers</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-project-diagram"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="admin-total-projects">0</span>
                                <span class="stat-label">Projects</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-calendar-alt"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="admin-total-events">0</span>
                                <span class="stat-label">Events</span>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <i class="fas fa-envelope"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="admin-unread-messages">0</span>
                                <span class="stat-label">Unread Messages</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Users Management -->
        <section id="admin-users" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>User Management</h1>
                    <p>Manage all system users</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" class="active" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-users-content">
                    <!-- Users management content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Admin Faculty Management -->
        <section id="admin-faculty" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Faculty Management</h1>
                    <p>Manage faculty members</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" class="active" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-faculty-content">
                    <!-- Faculty management content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Admin Programs Management -->
        <section id="admin-programs" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Programs Management</h1>
                    <p>Manage academic programs</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" class="active" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-programs-content">
                    <!-- Programs management content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Admin Projects Management -->
        <section id="admin-projects" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Projects Management</h1>
                    <p>Manage student and faculty projects</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" class="active" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-projects-content">
                    <!-- Projects management content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Admin Events Management -->
        <section id="admin-events" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Events Management</h1>
                    <p>Manage department events</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" class="active" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-events-content">
                    <!-- Events management content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Admin Toppers Management -->
        <section id="admin-toppers" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Toppers Management</h1>
                    <p>Manage academic toppers</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" class="active" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-toppers-content">
                    <div class="content-header">
                        <h2>Toppers</h2>
                        <button class="btn btn-primary" onclick="window.app.showAddTopperModal()">
                            <i class="fas fa-plus"></i> Add Topper
                        </button>
                        <button class="btn btn-outline" onclick="window.app.generateToppers()">
                            <i class="fas fa-sync-alt"></i> Generate from Students
                        </button>
                    </div>
                    <div class="toppers-grid" id="admin-toppers-grid">
                        <!-- Toppers will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Notices Management -->
        <section id="admin-notices" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Notices Management</h1>
                    <p>Manage department notices and announcements</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" class="active" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-notices-content">
                    <div class="content-header">
                        <h2>Notices</h2>
                        <button class="btn btn-primary" onclick="window.app.showAddNoticeModal()">
                            <i class="fas fa-plus"></i> Add Notice
                        </button>
                    </div>
                    <div class="notices-grid" id="admin-notices-grid">
                        <!-- Notices will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Messages Management -->
        <section id="admin-messages" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Messages Management</h1>
                    <p>View and manage contact messages</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" class="active" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content" id="admin-messages-content">
                    <!-- Messages management content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Admin Settings -->
        <section id="admin-settings" class="dashboard-section">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <h1>Department Settings</h1>
                    <p>Configure department settings</p>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#admin-dashboard" data-section="admin-dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#admin-users" data-section="admin-users"><i class="fas fa-users"></i> Users</a></li>
                        <li><a href="#admin-faculty" data-section="admin-faculty"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
                        <li><a href="#admin-programs" data-section="admin-programs"><i class="fas fa-graduation-cap"></i> Programs</a></li>
                        <li><a href="#admin-projects" data-section="admin-projects"><i class="fas fa-project-diagram"></i> Projects</a></li>
                        <li><a href="#admin-events" data-section="admin-events"><i class="fas fa-calendar-alt"></i> Events</a></li>
                        <li><a href="#admin-toppers" data-section="admin-toppers"><i class="fas fa-trophy"></i> Toppers</a></li>
                        <li><a href="#admin-notices" data-section="admin-notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
                        <li><a href="#admin-messages" data-section="admin-messages"><i class="fas fa-envelope"></i> Messages</a></li>
                        <li><a href="#admin-settings" class="active" data-section="admin-settings"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>

                <div class="dashboard-content">
                    <div class="form-container">
                        <form id="admin-settings-form">
                            <div class="form-section">
                                <h3>Department Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="admin-university">University Name</label>
                                        <input type="text" id="admin-university" name="university">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-department">Department Name</label>
                                        <input type="text" id="admin-department" name="department">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-address">Address</label>
                                        <textarea id="admin-address" name="address"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-phone">Phone</label>
                                        <input type="text" id="admin-phone" name="phone">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-email">Email</label>
                                        <input type="email" id="admin-email" name="email">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-office-hours">Office Hours</label>
                                        <input type="text" id="admin-office-hours" name="officeHours">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-established">Established Year</label>
                                        <input type="number" id="admin-established" name="establishedYear" min="1900" max="2100">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-accreditation">Accreditation</label>
                                        <input type="text" id="admin-accreditation" name="accreditation">
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Social Media Links</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="admin-facebook">Facebook</label>
                                        <input type="url" id="admin-facebook" name="facebook">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-twitter">Twitter</label>
                                        <input type="url" id="admin-twitter" name="twitter">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-linkedin">LinkedIn</label>
                                        <input type="url" id="admin-linkedin" name="linkedin">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-youtube">YouTube</label>
                                        <input type="url" id="admin-youtube" name="youtube">
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-instagram">Instagram</label>
                                        <input type="url" id="admin-instagram" name="instagram">
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Vision & Mission</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="admin-vision">Vision</label>
                                        <textarea id="admin-vision" name="vision" rows="4"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-mission">Mission</label>
                                        <textarea id="admin-mission" name="mission" rows="4"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="admin-description">Description</label>
                                        <textarea id="admin-description" name="description" rows="4"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Statistics</h3>
                                <div class="form-group">
                                    <label for="admin-placement">Placement Percentage</label>
                                    <input type="number" id="admin-placement" name="placementPercentage" min="0" max="100" step="0.1">
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save Settings</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <div class="footer-logo">
                            <img src="assets/images/logo.png" alt="Department Logo" class="nav-logo">
                        </div>
                        <div class="brand-text">
                            <h3>CSE Department</h3>
                            <p>Data Science & MCA</p>
                        </div>
                    </div>
                    <p class="footer-description" id="footer-description">
                        Empowering students with cutting-edge technology education and research opportunities.
                    </p>
                    <div class="social-links" id="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="#about" data-section="about">About Department</a></li>
                        <li><a href="#faculty" data-section="faculty">Faculty</a></li>
                        <li><a href="#projects" data-section="projects">Student Projects</a></li>
                        <li><a href="#events" data-section="events">Events</a></li>
                        <li><a href="#contact" data-section="contact">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Programs</h4>
                    <ul class="footer-links" id="footer-programs">
                        <!-- Programs will be loaded dynamically -->
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Student Resources</h4>
                    <ul class="footer-links">
                        <li><a href="#" id="student-login-footer">Student Portal</a></li>
                        <li><a href="#">Academic Calendar</a></li>
                        <li><a href="#">Library</a></li>
                        <li><a href="#">Placement Cell</a></li>
                        <li><a href="#">Alumni Network</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-divider"></div>
                <div class="footer-bottom-content">
                    <p>&copy; <span id="current-year">2024</span> CSE Department. All rights reserved.</p>
                    <div class="footer-bottom-links">
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Accessibility</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- ==================== MODALS ==================== -->

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Login to Portal</h3>
                <button class="modal-close" data-modal="login-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="login-form-container">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" name="password" required>
                    </div>
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember-me" checked>
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" class="forgot-password" id="forgot-password-link">Forgot Password?</a>
                    </div>
                    <button type="button" class="btn btn-primary btn-large" id="login-submit-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                <div class="auth-divider">
                    <span>Don't have an account?</span>
                </div>
                <button class="btn btn-outline btn-large" id="switch-to-register">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Account</h3>
                <button class="modal-close" data-modal="register-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="register-form-container">
                    <!-- User Type Selection -->
                    <div class="form-group">
                        <label>I am a:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="userType" value="student" checked>
                                <span class="radio-custom"></span>
                                Student
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="userType" value="teacher">
                                <span class="radio-custom"></span>
                                Teacher
                            </label>
                        </div>
                    </div>

                    <!-- Profile Picture -->
                    <div class="form-group">
                        <label for="profile-pic">Profile Picture (Optional)</label>
                        <input type="file" id="profile-pic" name="profilePic" accept="image/*" hidden>
                        <div class="image-upload-container" id="image-upload-container">
                            <div class="upload-placeholder" id="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Click to upload or drag and drop</p>
                                <p class="text-muted">PNG, JPG, JPEG up to 5MB</p>
                            </div>
                            <img id="image-preview" class="image-preview" alt="Preview">
                            <div class="crop-container" id="crop-container">
                                <canvas id="crop-canvas"></canvas>
                                <div class="crop-controls">
                                    <button type="button" class="crop-btn" id="crop-btn">Crop to Square</button>
                                    <button type="button" class="crop-btn primary" id="save-crop-btn">Save Crop</button>
                                    <button type="button" class="crop-btn" id="cancel-crop-btn">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Common Fields -->
                    <div class="form-group">
                        <label for="register-fullname">Full Name</label>
                        <input type="text" id="register-fullname" name="fullName" required>
                    </div>

                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input type="email" id="register-email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" name="password" required minlength="6">
                    </div>

                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" name="confirmPassword" required>
                    </div>

                    <div class="form-group">
                        <label for="register-gender">Gender</label>
                        <select id="register-gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <!-- Student Specific Fields -->
                    <div class="student-fields">
                        <div class="form-group">
                            <label for="course">Course</label>
                            <select id="course" name="course">
                                <option value="">Select Course</option>
                                <option value="B.Tech CSE (Data Science)">B.Tech CSE (Data Science)</option>
                                <option value="MCA">MCA</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="year">Year</label>
                                <select id="year" name="year">
                                    <option value="">Select Year</option>
                                    <option value="1">1st Year</option>
                                    <option value="2">2nd Year</option>
                                    <option value="3">3rd Year</option>
                                    <option value="4">4th Year</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="semester">Semester</label>
                                <select id="semester" name="semester">
                                    <option value="">Select Semester</option>
                                    <option value="1">1st Semester</option>
                                    <option value="2">2nd Semester</option>
                                    <option value="3">3rd Semester</option>
                                    <option value="4">4th Semester</option>
                                    <option value="5">5th Semester</option>
                                    <option value="6">6th Semester</option>
                                    <option value="7">7th Semester</option>
                                    <option value="8">8th Semester</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="caste">Caste (Optional)</label>
                            <input type="text" id="caste" name="caste">
                        </div>

                        <div class="form-group">
                            <label for="dob">Date of Birth (Optional)</label>
                            <input type="date" id="dob" name="dateOfBirth">
                        </div>
                    </div>

                    <!-- Teacher Specific Fields -->
                    <div class="teacher-fields" style="display: none;">
                        <div class="form-group">
                            <label for="designation">Designation</label>
                            <select id="designation" name="designation">
                                <option value="">Select Designation</option>
                                <option value="HOD">Head of Department</option>
                                <option value="Professor">Professor</option>
                                <option value="Associate Professor">Associate Professor</option>
                                <option value="Assistant Professor">Assistant Professor</option>
                                <option value="Guest Professor">Guest Professor</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="qualification">Qualification</label>
                            <input type="text" id="qualification" name="qualification">
                        </div>

                        <div class="form-group">
                            <label for="experience">Experience (Years)</label>
                            <input type="number" id="experience" name="experienceYears" min="0" value="0">
                        </div>

                        <div class="form-group">
                            <label for="bio">Bio (Optional)</label>
                            <textarea id="bio" name="bio" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="terms-checkbox" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="#" class="terms-link">Terms and Conditions</a>
                        </label>
                    </div>

                    <button type="button" class="btn btn-primary btn-large" id="register-submit-btn">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </div>
                <div class="auth-divider">
                    <span>Already have an account?</span>
                </div>
                <button class="btn btn-outline btn-large" id="switch-to-login">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </div>
        </div>
    </div>

    <!-- OTP Verification Modal -->
    <div class="modal" id="otp-verification-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Verify Your Email</h3>
                <button class="modal-close" data-modal="otp-verification-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="verification-content">
                    <div class="verification-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <p>We've sent a verification code to your email.</p>
                    <p id="otp-email-display" style="font-weight: 500; margin: 1rem 0;"></p>
                    
                    <form class="verification-form" id="otp-verification-form">
                        <div class="otp-input-group">
                            <input type="text" class="otp-input" maxlength="1" data-index="0" autocomplete="off">
                            <input type="text" class="otp-input" maxlength="1" data-index="1" autocomplete="off">
                            <input type="text" class="otp-input" maxlength="1" data-index="2" autocomplete="off">
                            <input type="text" class="otp-input" maxlength="1" data-index="3" autocomplete="off">
                            <input type="text" class="otp-input" maxlength="1" data-index="4" autocomplete="off">
                            <input type="text" class="otp-input" maxlength="1" data-index="5" autocomplete="off">
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-primary btn-large" id="verify-otp-btn">
                                <i class="fas fa-check"></i> Verify Email
                            </button>
                        </div>
                    </form>
                    
                    <div class="resend-section">
                        <p>Didn't receive the code?</p>
                        <button class="btn btn-outline" id="resend-otp-btn" type="button">
                            <i class="fas fa-redo"></i> Resend OTP
                        </button>
                        <p id="resend-timer" style="margin-top: 0.5rem; font-size: 0.9rem;"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgot-password-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <button class="modal-close" data-modal="forgot-password-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="verification-content">
                    <div class="verification-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <p>Enter your email to receive a password reset OTP.</p>
                    
                    <form class="auth-form" id="forgot-password-form">
                        <div class="form-group">
                            <label for="forgot-email">Email Address</label>
                            <input type="email" id="forgot-email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-primary btn-large" id="forgot-password-submit-btn">
                                <i class="fas fa-paper-plane"></i> Send Reset OTP
                            </button>
                        </div>
                    </form>
                    
                    <div class="auth-divider">
                        <span>Remember your password?</span>
                    </div>
                    <button class="btn btn-outline btn-large" id="switch-to-login-from-forgot">
                        <i class="fas fa-sign-in-alt"></i> Back to Login
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Achievement Modal -->
    <div class="modal" id="add-achievement-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Achievement</h3>
                <button class="modal-close" data-modal="add-achievement-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-achievement-form">
                    <div class="form-group">
                        <label for="achievement-title">Title</label>
                        <input type="text" id="achievement-title" name="title" required>
                    </div>

                    <div class="form-group">
                        <label for="achievement-description">Description</label>
                        <textarea id="achievement-description" name="description" rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="achievement-category">Category</label>
                        <select id="achievement-category" name="category">
                            <option value="">Select Category</option>
                            <option value="Academic">Academic</option>
                            <option value="Sports">Sports</option>
                            <option value="Cultural">Cultural</option>
                            <option value="Technical">Technical</option>
                            <option value="Research">Research</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="achievement-date">Date</label>
                        <input type="date" id="achievement-date" name="date">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" data-modal="add-achievement-modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Achievement</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Topper Modal -->
    <div class="modal" id="add-topper-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Topper</h3>
                <button class="modal-close" data-modal="add-topper-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-topper-form">
                    <div class="form-group">
                        <label for="topper-name">Name</label>
                        <input type="text" id="topper-name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="topper-course">Course</label>
                        <select id="topper-course" name="course" required>
                            <option value="">Select Course</option>
                            <option value="B.Tech CSE (Data Science)">B.Tech CSE (Data Science)</option>
                            <option value="MCA">MCA</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="topper-year">Year</label>
                            <input type="number" id="topper-year" name="year" min="1" max="4" required>
                        </div>
                        <div class="form-group">
                            <label for="topper-semester">Semester</label>
                            <input type="number" id="topper-semester" name="semester" min="1" max="8">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="topper-cgpa">CGPA</label>
                        <input type="number" id="topper-cgpa" name="cgpa" min="0" max="10" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label for="topper-achievements">Achievements</label>
                        <textarea id="topper-achievements" name="achievements" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="topper-academicYear">Academic Year</label>
                        <input type="text" id="topper-academicYear" name="academicYear" placeholder="e.g., 2023-2024" required>
                    </div>

                    <div class="form-group">
                        <label for="topper-image">Image</label>
                        <input type="file" id="topper-image" name="image" accept="image/*">
                    </div>

                    <div class="form-group">
                        <label for="topper-linkedin">LinkedIn URL</label>
                        <input type="url" id="topper-linkedin" name="linkedin">
                    </div>

                    <div class="form-group">
                        <label for="topper-github">GitHub URL</label>
                        <input type="url" id="topper-github" name="github">
                    </div>

                    <div class="form-group">
                        <label for="topper-email">Email</label>
                        <input type="email" id="topper-email" name="email">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" data-modal="add-topper-modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Topper</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Notice Modal -->
    <div class="modal" id="add-notice-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Notice</h3>
                <button class="modal-close" data-modal="add-notice-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-notice-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="notice-title">Title</label>
                        <input type="text" id="notice-title" name="title" required>
                    </div>

                    <div class="form-group">
                        <label for="notice-description">Description</label>
                        <textarea id="notice-description" name="description" rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="notice-category">Category</label>
                        <select id="notice-category" name="category">
                            <option value="general">General</option>
                            <option value="academic">Academic</option>
                            <option value="event">Event</option>
                            <option value="exam">Exam</option>
                            <option value="holiday">Holiday</option>
                            <option value="placement">Placement</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="notice-important" name="isImportant">
                            <span class="checkmark"></span>
                            Mark as Important
                        </label>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="notice-validFrom">Valid From</label>
                            <input type="date" id="notice-validFrom" name="validFrom">
                        </div>
                        <div class="form-group">
                            <label for="notice-validUntil">Valid Until</label>
                            <input type="date" id="notice-validUntil" name="validUntil">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="notice-file">Attachment (PDF/TXT)</label>
                        <input type="file" id="notice-file" name="file" accept=".pdf,.txt">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" data-modal="add-notice-modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Notice</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="success-modal">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 id="success-title">Success!</h3>
                <p id="success-message">Your action was completed successfully.</p>
                <button class="btn btn-primary" data-modal="success-modal">
                    <i class="fas fa-check"></i> OK
                </button>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal" id="error-modal">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 id="error-title">Error!</h3>
                <p id="error-message">An error occurred. Please try again.</p>
                <button class="btn btn-primary" data-modal="error-modal">
                    <i class="fas fa-check"></i> OK
                </button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="confirm-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <h3 id="confirm-title">Are you sure?</h3>
                <p id="confirm-message">This action cannot be undone.</p>
                <div class="confirm-actions">
                    <button class="btn btn-outline" data-modal="confirm-modal">Cancel</button>
                    <button class="btn btn-danger" id="confirm-action-btn">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <script>
        // ===== GLOBAL CONFIGURATION =====
        const API_BASE_URL = 'http://127.0.0.1:8001/api';

        // ===== THEME MANAGER =====
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('theme-toggle');
                this.themeIcon = this.themeToggle?.querySelector('i');
                this.currentTheme = localStorage.getItem('theme') || 'light';
                this.init();
            }
            
            init() {
                if (this.themeToggle) {
                    this.setTheme(this.currentTheme);
                    this.themeToggle.addEventListener('click', () => this.toggleTheme());
                    this.updateIcon();
                }
            }
            
            setTheme(theme) {
                this.currentTheme = theme;
                localStorage.setItem('theme', theme);
                
                if (theme === 'dark') {
                    document.body.classList.add('dark-theme');
                } else {
                    document.body.classList.remove('dark-theme');
                }
                
                this.updateIcon();
            }
            
            updateIcon() {
                if (this.themeIcon) {
                    this.themeIcon.className = this.currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                }
            }
            
            toggleTheme() {
                this.setTheme(this.currentTheme === 'dark' ? 'light' : 'dark');
            }
        }

        // ===== AUTHENTICATION MANAGER =====
        class AuthManager {
            constructor() {
                this.isAuthenticated = false;
                this.currentUser = null;
                this.accessToken = null;
                this.refreshToken = null;
                this.pendingVerificationEmail = null;
                this.pendingVerificationForReset = false;
                this.pendingNewPassword = null;
                this.resendCooldown = 0;
                
                this.init();
            }
            
            init() {
                this.loadTokens();
                this.setupEventListeners();
                this.checkAuthStatus();
                this.preventFormSubmission();
            }
            
            preventFormSubmission() {
                document.querySelectorAll('form').forEach(form => {
                    form.addEventListener('submit', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    });
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        const target = e.target;
                        if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA') {
                            e.preventDefault();
                            
                            if (target.closest('#login-modal')) {
                                document.getElementById('login-submit-btn')?.click();
                            }
                            if (target.closest('#register-modal')) {
                                document.getElementById('register-submit-btn')?.click();
                            }
                        }
                    }
                });
            }
            
            loadTokens() {
                this.accessToken = localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken');
                this.refreshToken = localStorage.getItem('refreshToken') || sessionStorage.getItem('refreshToken');
                const userData = localStorage.getItem('userData');
                
                if (userData) {
                    try {
                        this.currentUser = JSON.parse(userData);
                        this.isAuthenticated = true;
                    } catch (e) {
                        console.error('Error parsing user data:', e);
                        this.clearAuthData();
                    }
                }
            }
            
            setupEventListeners() {
                // Login/Register buttons
                const loginBtn = document.getElementById('login-btn');
                const registerBtn = document.getElementById('register-btn');
                const logoutBtn = document.getElementById('logout-btn');
                const forgotPasswordLink = document.getElementById('forgot-password-link');
                
                if (loginBtn) loginBtn.addEventListener('click', () => this.openModal('login-modal'));
                if (registerBtn) registerBtn.addEventListener('click', () => this.openModal('register-modal'));
                if (logoutBtn) logoutBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.logout();
                });
                
                if (forgotPasswordLink) {
                    forgotPasswordLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.closeModal('login-modal');
                        this.openModal('forgot-password-modal');
                    });
                }
                
                // Modal switches
                const switchToRegister = document.getElementById('switch-to-register');
                const switchToLogin = document.getElementById('switch-to-login');
                const switchToLoginFromForgot = document.getElementById('switch-to-login-from-forgot');
                
                if (switchToRegister) {
                    switchToRegister.addEventListener('click', () => {
                        this.closeModal('login-modal');
                        this.openModal('register-modal');
                    });
                }
                
                if (switchToLogin) {
                    switchToLogin.addEventListener('click', () => {
                        this.closeModal('register-modal');
                        this.openModal('login-modal');
                    });
                }
                
                if (switchToLoginFromForgot) {
                    switchToLoginFromForgot.addEventListener('click', () => {
                        this.closeModal('forgot-password-modal');
                        this.openModal('login-modal');
                    });
                }
                
                // Form submission buttons
                const loginSubmitBtn = document.getElementById('login-submit-btn');
                const registerSubmitBtn = document.getElementById('register-submit-btn');
                const forgotPasswordSubmitBtn = document.getElementById('forgot-password-submit-btn');
                const verifyOtpBtn = document.getElementById('verify-otp-btn');
                const changePasswordBtn = document.getElementById('change-password-btn');
                
                if (loginSubmitBtn) loginSubmitBtn.addEventListener('click', (e) => this.handleLogin(e));
                if (registerSubmitBtn) registerSubmitBtn.addEventListener('click', (e) => this.handleRegister(e));
                if (forgotPasswordSubmitBtn) forgotPasswordSubmitBtn.addEventListener('click', (e) => this.handleForgotPassword(e));
                if (verifyOtpBtn) verifyOtpBtn.addEventListener('click', (e) => this.handleOtpVerification(e));
                if (changePasswordBtn) changePasswordBtn.addEventListener('click', (e) => this.handleChangePassword(e));
                
                // User type toggle
                document.querySelectorAll('input[name="userType"]').forEach(radio => {
                    radio.addEventListener('change', (e) => this.toggleUserFields(e.target.value));
                });
                
                // Modal close buttons
                document.querySelectorAll('.modal-close, .modal-content [data-modal]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const modalId = e.target.closest('[data-modal]')?.dataset.modal;
                        if (modalId) {
                            this.closeModal(modalId);
                        }
                    });
                });
                
                // Close modal on ESC and click outside
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        const openModal = document.querySelector('.modal.active');
                        if (openModal) {
                            this.closeModal(openModal.id);
                        }
                    }
                });
                
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        this.closeModal(e.target.id);
                    }
                });
                
                // Student portal button
                const studentPortalBtn = document.getElementById('student-portal-btn');
                if (studentPortalBtn) {
                    studentPortalBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (this.isAuthenticated) {
                            const dashboardSection = this.currentUser.role === 'student' ? 'student-dashboard' : 
                                                   this.currentUser.role === 'teacher' ? 'faculty-dashboard' :
                                                   this.currentUser.role === 'admin' ? 'admin-dashboard' : 'student-dashboard';
                            window.app.showSection(dashboardSection);
                        } else {
                            this.openModal('login-modal');
                            this.showToast('Please login to access portal', 'info');
                        }
                    });
                }
                
                // Student login footer link
                const studentLoginFooter = document.getElementById('student-login-footer');
                if (studentLoginFooter) {
                    studentLoginFooter.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (this.isAuthenticated) {
                            const dashboardSection = this.currentUser.role === 'student' ? 'student-dashboard' : 
                                                   this.currentUser.role === 'teacher' ? 'faculty-dashboard' :
                                                   this.currentUser.role === 'admin' ? 'admin-dashboard' : 'student-dashboard';
                            window.app.showSection(dashboardSection);
                        } else {
                            this.openModal('login-modal');
                        }
                    });
                }
                
                // User dropdown links
                const dashboardLink = document.getElementById('dashboard-link');
                const profileLink = document.getElementById('profile-link');
                const settingsLink = document.getElementById('settings-link');
                
                if (dashboardLink) {
                    dashboardLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (this.isAuthenticated) {
                            const dashboardSection = this.currentUser.role === 'student' ? 'student-dashboard' : 
                                                   this.currentUser.role === 'teacher' ? 'faculty-dashboard' :
                                                   this.currentUser.role === 'admin' ? 'admin-dashboard' : 'student-dashboard';
                            window.app.showSection(dashboardSection);
                        }
                    });
                }
                
                if (profileLink) {
                    profileLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (this.isAuthenticated) {
                            const profileSection = this.currentUser.role === 'student' ? 'student-profile' : 
                                                 this.currentUser.role === 'teacher' ? 'faculty-profile' : 'admin-dashboard';
                            window.app.showSection(profileSection);
                        }
                    });
                }
                
                if (settingsLink) {
                    settingsLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (this.isAuthenticated && this.currentUser.role === 'admin') {
                            window.app.showSection('admin-settings');
                        }
                    });
                }
                
                // Resend OTP button
                const resendOtpBtn = document.getElementById('resend-otp-btn');
                if (resendOtpBtn) {
                    resendOtpBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.resendOtp();
                    });
                }
                
                // Setup OTP inputs
                this.setupOtpInputs();
            }
            
            toggleUserFields(userType) {
                const studentFields = document.querySelector('.student-fields');
                const teacherFields = document.querySelector('.teacher-fields');
                
                if (userType === 'student') {
                    if (studentFields) studentFields.style.display = 'block';
                    if (teacherFields) teacherFields.style.display = 'none';
                    
                    const studentRequired = ['course', 'year', 'semester'];
                    studentRequired.forEach(field => {
                        const el = document.getElementById(field);
                        if (el) el.required = true;
                    });
                    
                    const teacherNotRequired = ['designation', 'qualification', 'experience'];
                    teacherNotRequired.forEach(field => {
                        const el = document.getElementById(field);
                        if (el) el.required = false;
                    });
                } else {
                    if (studentFields) studentFields.style.display = 'none';
                    if (teacherFields) teacherFields.style.display = 'block';
                    
                    const teacherRequired = ['designation', 'qualification'];
                    teacherRequired.forEach(field => {
                        const el = document.getElementById(field);
                        if (el) el.required = true;
                    });
                    
                    const studentNotRequired = ['course', 'year', 'semester'];
                    studentNotRequired.forEach(field => {
                        const el = document.getElementById(field);
                        if (el) el.required = false;
                    });
                }
            }
            
            async handleLogin(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const emailInput = document.getElementById('login-email');
                const passwordInput = document.getElementById('login-password');
                
                if (!emailInput || !passwordInput) {
                    this.showToast('Login form not found', 'error');
                    return;
                }
                
                const email = emailInput.value.trim();
                const password = passwordInput.value;
                
                if (!email || !password) {
                    this.showToast('Email and password are required', 'error');
                    return;
                }
                
                try {
                    const loginBtn = document.getElementById('login-submit-btn');
                    if (loginBtn) {
                        loginBtn.disabled = true;
                        loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
                    }
                    
                    const formData = new FormData();
                    formData.append('email', email);
                    formData.append('password', password);
                    
                    const response = await fetch(`${API_BASE_URL}/auth/login`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.setAuthData(data);
                        this.closeModal('login-modal');
                        this.showToast('Login successful!', 'success');
                        this.updateUI();
                        
                        const dashboardSection = this.currentUser.role === 'student' ? 'student-dashboard' : 
                                               this.currentUser.role === 'teacher' ? 'faculty-dashboard' :
                                               this.currentUser.role === 'admin' ? 'admin-dashboard' : 'home';
                        window.app.showSection(dashboardSection);
                    } else {
                        this.showToast(data.detail || data.message || 'Login failed', 'error');
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    this.showToast('Network error. Please try again.', 'error');
                } finally {
                    const loginBtn = document.getElementById('login-submit-btn');
                    if (loginBtn) {
                        loginBtn.disabled = false;
                        loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
                    }
                }
            }
            
            async handleRegister(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // Get form values
                const userType = document.querySelector('input[name="userType"]:checked')?.value || 'student';
                const fullName = document.getElementById('register-fullname')?.value || '';
                const email = document.getElementById('register-email')?.value || '';
                const password = document.getElementById('register-password')?.value || '';
                const confirmPassword = document.getElementById('confirm-password')?.value || '';
                const gender = document.getElementById('register-gender')?.value || '';
                
                // Validate required fields
                if (!fullName || !email || !password || !confirmPassword || !gender) {
                    this.showToast('Please fill all required fields', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    this.showToast('Passwords do not match', 'error');
                    return;
                }
                
                if (password.length < 8) {
                    this.showToast('Password must be at least 8 characters', 'error');
                    return;
                }
                
                // Password strength validation
                const hasUpperCase = /[A-Z]/.test(password);
                const hasLowerCase = /[a-z]/.test(password);
                const hasNumbers = /\d/.test(password);
                
                if (!hasUpperCase || !hasLowerCase || !hasNumbers) {
                    this.showToast('Password must contain uppercase, lowercase and numbers', 'error');
                    return;
                }
                
                const termsCheckbox = document.getElementById('terms-checkbox');
                if (!termsCheckbox || !termsCheckbox.checked) {
                    this.showToast('Please agree to the Terms and Conditions', 'error');
                    return;
                }
                
                // Build registration data based on user type
                const registrationData = {};
                
                if (userType === 'student') {
                    const course = document.getElementById('course')?.value;
                    const year = document.getElementById('year')?.value;
                    const semester = document.getElementById('semester')?.value;
                    
                    if (!course || !year || !semester) {
                        this.showToast('Course, Year, and Semester are required for students', 'error');
                        return;
                    }
                    
                    registrationData.course = course;
                    registrationData.year = parseInt(year);
                    registrationData.semester = parseInt(semester);
                    if (document.getElementById('caste')?.value) {
                        registrationData.caste = document.getElementById('caste')?.value;
                    }
                    if (document.getElementById('dob')?.value) {
                        registrationData.dateOfBirth = document.getElementById('dob')?.value;
                    }
                } else {
                    const designation = document.getElementById('designation')?.value;
                    const qualification = document.getElementById('qualification')?.value;
                    
                    if (!designation || !qualification) {
                        this.showToast('Designation and Qualification are required for teachers', 'error');
                        return;
                    }
                    
                    registrationData.designation = designation;
                    registrationData.qualification = qualification;
                    if (document.getElementById('experience')?.value) {
                        registrationData.experienceYears = parseInt(document.getElementById('experience')?.value);
                    }
                    if (document.getElementById('bio')?.value) {
                        registrationData.bio = document.getElementById('bio')?.value;
                    }
                    if (document.getElementById('specialization')?.value) {
                        registrationData.specialization = document.getElementById('specialization')?.value;
                    }
                    if (document.getElementById('research-interests')?.value) {
                        registrationData.researchInterests = document.getElementById('research-interests')?.value;
                    }
                    if (document.getElementById('office')?.value) {
                        registrationData.office = document.getElementById('office')?.value;
                    }
                    if (document.getElementById('office-hours')?.value) {
                        registrationData.officeHours = document.getElementById('office-hours')?.value;
                    }
                    if (document.getElementById('linkedin')?.value) {
                        registrationData.linkedin = document.getElementById('linkedin')?.value;
                    }
                    if (document.getElementById('google-scholar')?.value) {
                        registrationData.googleScholar = document.getElementById('google-scholar')?.value;
                    }
                    if (document.getElementById('expertise')?.value) {
                        const expertise = document.getElementById('expertise')?.value.split(',').map(e => e.trim());
                        registrationData.expertise = expertise;
                    }
                }
                
                // Get profile picture from crop canvas if available
                let profilePic = null;
                if (window.imageEditor) {
                    profilePic = window.imageEditor.getCroppedImage();
                }
                
                const formData = new FormData();
                formData.append('email', email);
                formData.append('password', password);
                formData.append('fullName', fullName);
                formData.append('userType', userType);
                formData.append('gender', gender);
                formData.append('registrationData', JSON.stringify(registrationData));
                
                if (profilePic) {
                    // Convert base64 to blob for upload
                    const base64Data = profilePic.split(',')[1];
                    const blob = this.base64ToBlob(base64Data, 'image/jpeg');
                    formData.append('avatar', blob, 'profile.jpg');
                }
                
                try {
                    const registerBtn = document.getElementById('register-submit-btn');
                    if (registerBtn) {
                        registerBtn.disabled = true;
                        registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
                    }
                    
                    const response = await fetch(`${API_BASE_URL}/auth/register`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.closeModal('register-modal');
                        this.pendingVerificationEmail = email;
                        this.showOtpVerification(email);
                        this.showToast(data.message || 'Registration successful! Please verify your email.', 'success');
                    } else {
                        this.showToast(data.detail || data.message || 'Registration failed', 'error');
                    }
                } catch (error) {
                    console.error('Registration error:', error);
                    this.showToast('Network error. Please try again.', 'error');
                } finally {
                    const registerBtn = document.getElementById('register-submit-btn');
                    if (registerBtn) {
                        registerBtn.disabled = false;
                        registerBtn.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';
                    }
                }
            }
            
            base64ToBlob(base64, mimeType) {
                const byteCharacters = atob(base64);
                const byteArrays = [];
                
                for (let offset = 0; offset < byteCharacters.length; offset += 512) {
                    const slice = byteCharacters.slice(offset, offset + 512);
                    
                    const byteNumbers = new Array(slice.length);
                    for (let i = 0; i < slice.length; i++) {
                        byteNumbers[i] = slice.charCodeAt(i);
                    }
                    
                    const byteArray = new Uint8Array(byteNumbers);
                    byteArrays.push(byteArray);
                }
                
                return new Blob(byteArrays, { type: mimeType });
            }
            
            async handleForgotPassword(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const emailInput = document.getElementById('forgot-email');
                if (!emailInput) return;
                
                const email = emailInput.value.trim();
                if (!email) {
                    this.showToast('Email is required', 'error');
                    return;
                }
                
                try {
                    const submitBtn = document.getElementById('forgot-password-submit-btn');
                    if (submitBtn) {
                        submitBtn.disabled = true;
                        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
                    }
                    
                    const formData = new FormData();
                    formData.append('email', email);
                    
                    const response = await fetch(`${API_BASE_URL}/auth/forgot-password`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.closeModal('forgot-password-modal');
                        this.pendingVerificationEmail = email;
                        this.pendingVerificationForReset = true;
                        this.showOtpVerification(email, 'reset');
                        this.showToast(data.message || 'OTP sent to your email', 'success');
                    } else {
                        this.showToast(data.detail || data.message || 'Failed to send OTP', 'error');
                    }
                } catch (error) {
                    console.error('Forgot password error:', error);
                    this.showToast('Network error. Please try again.', 'error');
                } finally {
                    const submitBtn = document.getElementById('forgot-password-submit-btn');
                    if (submitBtn) {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Reset OTP';
                    }
                }
            }
            
            async handleOtpVerification(e) {
                e.preventDefault();
                
                const inputs = document.querySelectorAll('.otp-input');
                const otp = Array.from(inputs).map(input => input.value).join('');
                
                if (otp.length !== 6) {
                    this.showToast('Please enter the complete 6-digit code', 'error');
                    return;
                }
                
                const endpoint = this.pendingVerificationForReset ? '/auth/reset-password' : '/auth/verify-email';
                
                try {
                    const verifyBtn = document.getElementById('verify-otp-btn');
                    if (verifyBtn) {
                        verifyBtn.disabled = true;
                        verifyBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
                    }
                    
                    const formData = new FormData();
                    formData.append('email', this.pendingVerificationEmail);
                    formData.append('otp', otp);
                    
                    if (this.pendingVerificationForReset && this.pendingNewPassword) {
                        formData.append('newPassword', this.pendingNewPassword);
                    }
                    
                    const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.closeModal('otp-verification-modal');
                        this.showToast('Verification successful!', 'success');
                        
                        if (!this.pendingVerificationForReset && data.accessToken && data.user) {
                            this.setAuthData(data);
                            this.updateUI();
                        }
                        
                        if (this.pendingVerificationForReset) {
                            this.openModal('login-modal');
                        }
                        
                        this.pendingVerificationForReset = false;
                        this.pendingNewPassword = null;
                    } else {
                        this.showToast(data.detail || data.message || 'Invalid verification code', 'error');
                        inputs.forEach(input => input.value = '');
                        inputs[0].focus();
                    }
                } catch (error) {
                    console.error('OTP verification error:', error);
                    this.showToast('Network error. Please try again.', 'error');
                } finally {
                    const verifyBtn = document.getElementById('verify-otp-btn');
                    if (verifyBtn) {
                        verifyBtn.disabled = false;
                        verifyBtn.innerHTML = '<i class="fas fa-check-circle"></i> Verify';
                    }
                }
            }
            
            async handleChangePassword(e) {
                e.preventDefault();
                
                if (!this.isAuthenticated) {
                    this.showToast('Please login first', 'error');
                    return;
                }
                
                const currentPassword = document.getElementById('current-password')?.value;
                const newPassword = document.getElementById('new-password')?.value;
                const confirmPassword = document.getElementById('confirm-new-password')?.value;
                
                if (!currentPassword || !newPassword || !confirmPassword) {
                    this.showToast('All fields are required', 'error');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    this.showToast('New passwords do not match', 'error');
                    return;
                }
                
                if (newPassword.length < 8) {
                    this.showToast('Password must be at least 8 characters', 'error');
                    return;
                }
                
                try {
                    const formData = new FormData();
                    formData.append('current_password', currentPassword);
                    formData.append('new_password', newPassword);
                    
                    const response = await fetch(`${API_BASE_URL}/auth/change-password`, {
                        method: 'POST',
                        headers: this.getAuthHeaders(),
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.showToast('Password changed successfully', 'success');
                        this.closeModal('change-password-modal');
                        document.getElementById('change-password-form')?.reset();
                    } else {
                        this.showToast(data.detail || data.message || 'Failed to change password', 'error');
                    }
                } catch (error) {
                    console.error('Change password error:', error);
                    this.showToast('Network error', 'error');
                }
            }
            
            async handleResendOtp() {
                if (this.resendCooldown > 0) return;
                
                try {
                    const formData = new FormData();
                    formData.append('email', this.pendingVerificationEmail);
                    
                    const response = await fetch(`${API_BASE_URL}/auth/resend-otp`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.showToast('Verification code resent to your email', 'success');
                        this.startResendTimer();
                    } else {
                        this.showToast(data.detail || data.message || 'Failed to resend code', 'error');
                    }
                } catch (error) {
                    console.error('Resend OTP error:', error);
                    this.showToast('Network error. Please try again.', 'error');
                }
            }
            
            setAuthData(data) {
                this.accessToken = data.accessToken;
                this.refreshToken = data.refreshToken;
                this.currentUser = data.user;
                this.isAuthenticated = true;
                
                localStorage.setItem('accessToken', data.accessToken);
                localStorage.setItem('refreshToken', data.refreshToken);
                localStorage.setItem('userData', JSON.stringify(data.user));
                
                this.updateUI();
            }
            
            async checkAuthStatus() {
                if (!this.accessToken) return;
                
                try {
                    const response = await fetch(`${API_BASE_URL}/auth/verify`, {
                        headers: this.getAuthHeaders()
                    });
                    
                    if (!response.ok) {
                        await this.refreshToken();
                    }
                } catch (error) {
                    console.error('Auth check error:', error);
                }
                
                this.updateUI();
            }
            
            async refreshToken() {
                if (!this.refreshToken) {
                    this.clearAuthData();
                    return;
                }
                
                try {
                    const formData = new FormData();
                    formData.append('refresh_token', this.refreshToken);
                    
                    const response = await fetch(`${API_BASE_URL}/auth/refresh`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        this.accessToken = data.accessToken;
                        localStorage.setItem('accessToken', data.accessToken);
                    } else {
                        this.clearAuthData();
                    }
                } catch (error) {
                    console.error('Token refresh error:', error);
                    this.clearAuthData();
                }
            }
            
            clearAuthData() {
                this.isAuthenticated = false;
                this.currentUser = null;
                this.accessToken = null;
                this.refreshToken = null;
                
                localStorage.removeItem('accessToken');
                localStorage.removeItem('refreshToken');
                localStorage.removeItem('userData');
                sessionStorage.removeItem('accessToken');
                sessionStorage.removeItem('refreshToken');
                
                this.updateUI();
            }
            
            async logout() {
                try {
                    if (this.refreshToken) {
                        const formData = new FormData();
                        formData.append('refresh_token', this.refreshToken);
                        
                        await fetch(`${API_BASE_URL}/auth/logout`, {
                            method: 'POST',
                            body: formData
                        });
                    }
                } catch (error) {
                    console.error('Logout error:', error);
                } finally {
                    this.clearAuthData();
                    this.showToast('Logged out successfully', 'info');
                    window.app.showSection('home');
                }
            }
            
            updateUI() {
                const authButtons = document.getElementById('auth-buttons');
                const userMenu = document.getElementById('user-menu');
                const dashboardNav = document.getElementById('dashboard-nav');
                
                if (this.isAuthenticated && this.currentUser) {
                    if (authButtons) authButtons.style.display = 'none';
                    if (userMenu) userMenu.style.display = 'block';
                    if (dashboardNav) dashboardNav.style.display = 'block';
                    
                    const userName = document.getElementById('user-name');
                    const userRole = document.getElementById('user-role');
                    const userAvatarImg = document.getElementById('user-avatar-img');
                    
                    if (userName) userName.textContent = this.currentUser.fullName;
                    if (userRole) {
                        userRole.textContent = this.currentUser.role.charAt(0).toUpperCase() + this.currentUser.role.slice(1);
                    }
                    if (userAvatarImg && this.currentUser.avatar) {
                        userAvatarImg.src = this.currentUser.avatar;
                    } else if (userAvatarImg) {
                        userAvatarImg.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(this.currentUser.fullName)}&background=4361ee&color=fff&size=200`;
                    }
                    
                    // Update nav menu based on role
                    const navMenu = document.getElementById('nav-menu');
                    if (navMenu) {
                        const existingAdminLink = navMenu.querySelector('[data-section="admin-dashboard"]');
                        if (this.currentUser.role === 'admin' && !existingAdminLink) {
                            const adminLink = document.createElement('a');
                            adminLink.href = '#admin-dashboard';
                            adminLink.className = 'nav-link';
                            adminLink.setAttribute('data-section', 'admin-dashboard');
                            adminLink.innerHTML = '<i class="fas fa-tachometer-alt"></i> Admin';
                            navMenu.appendChild(adminLink);
                        } else if (this.currentUser.role !== 'admin' && existingAdminLink) {
                            existingAdminLink.remove();
                        }
                    }
                } else {
                    if (authButtons) authButtons.style.display = 'flex';
                    if (userMenu) userMenu.style.display = 'none';
                    if (dashboardNav) dashboardNav.style.display = 'none';
                    
                    const navMenu = document.getElementById('nav-menu');
                    if (navMenu) {
                        const adminLink = navMenu.querySelector('[data-section="admin-dashboard"]');
                        if (adminLink) {
                            adminLink.remove();
                        }
                    }
                }
            }
            
            getAuthHeaders() {
                return {
                    'Authorization': `Bearer ${this.accessToken}`
                };
            }
            
            openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            }
            
            closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            }
            
            showToast(message, type = 'info') {
                const toastContainer = document.getElementById('toast-container');
                if (!toastContainer) return;
                
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                
                toast.innerHTML = `
                    <i class="fas ${icons[type] || 'fa-info-circle'} toast-icon"></i>
                    <div class="toast-content">
                        <div class="toast-message">${message}</div>
                    </div>
                    <button class="toast-close">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                toastContainer.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 100);
                
                toast.querySelector('.toast-close').addEventListener('click', () => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                });
                
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.classList.remove('show');
                        setTimeout(() => toast.remove(), 300);
                    }
                }, 5000);
            }

            showOtpVerification(email, type = 'verify') {
                const otpEmailDisplay = document.getElementById('otp-email-display');
                if (otpEmailDisplay) {
                    otpEmailDisplay.textContent = email;
                }
                
                document.querySelectorAll('.otp-input').forEach(input => {
                    input.value = '';
                });
                
                this.pendingVerificationEmail = email;
                this.pendingVerificationForReset = type === 'reset';
                
                this.startResendTimer();
                this.openModal('otp-verification-modal');
                this.setupOtpInputs();
                
                const firstOtpInput = document.querySelector('.otp-input');
                if (firstOtpInput) {
                    setTimeout(() => firstOtpInput.focus(), 100);
                }
            }
            
            setupOtpInputs() {
                const inputs = document.querySelectorAll('.otp-input');
                
                inputs.forEach((input, index) => {
                    const newInput = input.cloneNode(true);
                    input.parentNode.replaceChild(newInput, input);
                });
                
                const newInputs = document.querySelectorAll('.otp-input');
                
                newInputs.forEach((input, index) => {
                    input.addEventListener('input', (e) => {
                        if (e.target.value && index < newInputs.length - 1) {
                            newInputs[index + 1].focus();
                        }
                        
                        if (Array.from(newInputs).every(input => input.value)) {
                            this.handleOtpVerification(new Event('submit'));
                        }
                    });
                    
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Backspace' && !e.target.value && index > 0) {
                            newInputs[index - 1].focus();
                        }
                        
                        if (e.key === 'ArrowLeft' && index > 0) {
                            newInputs[index - 1].focus();
                        }
                        if (e.key === 'ArrowRight' && index < newInputs.length - 1) {
                            newInputs[index + 1].focus();
                        }
                    });
                    
                    input.addEventListener('keypress', (e) => {
                        if (!/^\d$/.test(e.key)) {
                            e.preventDefault();
                        }
                    });
                });
            }
            
            startResendTimer() {
                this.resendCooldown = 60;
                const resendBtn = document.getElementById('resend-otp-btn');
                const timerDisplay = document.getElementById('resend-timer');
                
                if (resendBtn) resendBtn.disabled = true;
                
                const timer = setInterval(() => {
                    this.resendCooldown--;
                    
                    if (this.resendCooldown <= 0) {
                        clearInterval(timer);
                        if (resendBtn) resendBtn.disabled = false;
                        if (timerDisplay) timerDisplay.textContent = '';
                    } else {
                        if (timerDisplay) timerDisplay.textContent = `Resend available in ${this.resendCooldown}s`;
                    }
                }, 1000);
            }
        }

        // ===== SIMPLIFIED IMAGE EDITOR =====
        class SimpleImageEditor {
            constructor() {
                this.fileInput = document.getElementById('profile-pic');
                this.uploadContainer = document.getElementById('image-upload-container');
                this.uploadPlaceholder = document.getElementById('upload-placeholder');
                this.imagePreview = document.getElementById('image-preview');
                this.cropContainer = document.getElementById('crop-container');
                this.cropCanvas = document.getElementById('crop-canvas');
                this.cropBtn = document.getElementById('crop-btn');
                this.saveCropBtn = document.getElementById('save-crop-btn');
                this.cancelCropBtn = document.getElementById('cancel-crop-btn');
                
                if (this.cropCanvas) {
                    this.ctx = this.cropCanvas.getContext('2d');
                }
                this.originalImage = null;
                this.isCropping = false;
                this.cropStartX = 0;
                this.cropStartY = 0;
                this.cropWidth = 0;
                this.cropHeight = 0;
                this.isDrawing = false;
                this.croppedImageData = null;
                
                this.init();
            }
            
            init() {
                if (this.fileInput) {
                    this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                }
                
                if (this.uploadContainer) {
                    this.uploadContainer.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (this.fileInput) this.fileInput.click();
                    });
                }
                
                if (this.uploadContainer) {
                    this.uploadContainer.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        this.uploadContainer.classList.add('dragover');
                    });
                    
                    this.uploadContainer.addEventListener('dragleave', () => {
                        this.uploadContainer.classList.remove('dragover');
                    });
                    
                    this.uploadContainer.addEventListener('drop', (e) => {
                        e.preventDefault();
                        this.uploadContainer.classList.remove('dragover');
                        
                        const files = e.dataTransfer.files;
                        if (files.length > 0) {
                            this.handleFile(files[0]);
                        }
                    });
                }
                
                if (this.cropBtn) {
                    this.cropBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.startCrop();
                    });
                }
                
                if (this.saveCropBtn) {
                    this.saveCropBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.saveCrop();
                    });
                }
                
                if (this.cancelCropBtn) {
                    this.cancelCropBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.cancelCrop();
                    });
                }
                
                if (this.cropCanvas) {
                    this.cropCanvas.addEventListener('mousedown', (e) => this.startDrawing(e));
                    this.cropCanvas.addEventListener('mousemove', (e) => this.drawCropArea(e));
                    this.cropCanvas.addEventListener('mouseup', () => this.stopDrawing());
                    this.cropCanvas.addEventListener('mouseleave', () => this.stopDrawing());
                    
                    this.cropCanvas.addEventListener('touchstart', (e) => {
                        e.preventDefault();
                        if (e.touches[0]) this.startDrawing(e.touches[0]);
                    });
                    
                    this.cropCanvas.addEventListener('touchmove', (e) => {
                        e.preventDefault();
                        if (e.touches[0]) this.drawCropArea(e.touches[0]);
                    });
                    
                    this.cropCanvas.addEventListener('touchend', (e) => {
                        e.preventDefault();
                        this.stopDrawing();
                    });
                    
                    this.cropCanvas.addEventListener('touchcancel', (e) => {
                        e.preventDefault();
                        this.stopDrawing();
                    });
                }
            }
            
            handleFileSelect(e) {
                const file = e.target.files[0];
                if (file) {
                    this.handleFile(file);
                }
            }
            
            handleFile(file) {
                if (!file.type.match('image.*')) {
                    this.showToast('Please select an image file', 'error');
                    return;
                }
                
                if (file.size > 5 * 1024 * 1024) {
                    this.showToast('Image size should be less than 5MB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.originalImage = new Image();
                    this.originalImage.onload = () => {
                        this.showPreview(this.originalImage);
                    };
                    this.originalImage.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
            
            showPreview(image) {
                if (this.uploadPlaceholder) this.uploadPlaceholder.style.display = 'none';
                if (this.imagePreview) {
                    this.imagePreview.style.display = 'block';
                    this.imagePreview.src = image.src;
                }
                
                const maxSize = 400;
                let width = image.width;
                let height = image.height;
                
                if (width > maxSize || height > maxSize) {
                    const ratio = Math.min(maxSize / width, maxSize / height);
                    width = Math.floor(width * ratio);
                    height = Math.floor(height * ratio);
                }
                
                if (this.cropCanvas) {
                    this.cropCanvas.width = width;
                    this.cropCanvas.height = height;
                    
                    this.ctx.clearRect(0, 0, this.cropCanvas.width, this.cropCanvas.height);
                    this.ctx.drawImage(image, 0, 0, width, height);
                }
            }
            
            startCrop() {
                this.isCropping = true;
                if (this.cropContainer) this.cropContainer.style.display = 'block';
                if (this.imagePreview) this.imagePreview.style.display = 'none';
                
                if (this.cropCanvas) {
                    const size = Math.min(this.cropCanvas.width, this.cropCanvas.height) * 0.8;
                    this.cropStartX = (this.cropCanvas.width - size) / 2;
                    this.cropStartY = (this.cropCanvas.height - size) / 2;
                    this.cropWidth = size;
                    this.cropHeight = size;
                    
                    this.drawCropOverlay();
                }
            }
            
            startDrawing(e) {
                if (!this.isCropping || !this.cropCanvas) return;
                
                const rect = this.cropCanvas.getBoundingClientRect();
                const clientX = e.clientX || e.touches?.[0]?.clientX;
                const clientY = e.clientY || e.touches?.[0]?.clientY;
                
                if (clientX && clientY) {
                    this.cropStartX = clientX - rect.left;
                    this.cropStartY = clientY - rect.top;
                    this.isDrawing = true;
                }
            }
            
            drawCropArea(e) {
                if (!this.isCropping || !this.isDrawing || !this.cropCanvas) return;
                e.preventDefault();
                
                const rect = this.cropCanvas.getBoundingClientRect();
                const clientX = e.clientX || e.touches?.[0]?.clientX;
                const clientY = e.clientY || e.touches?.[0]?.clientY;
                
                if (clientX && clientY) {
                    const currentX = clientX - rect.left;
                    const currentY = clientY - rect.top;
                    
                    this.cropWidth = currentX - this.cropStartX;
                    this.cropHeight = currentY - this.cropStartY;
                    
                    const size = Math.min(Math.abs(this.cropWidth), Math.abs(this.cropHeight));
                    this.cropWidth = this.cropWidth < 0 ? -size : size;
                    this.cropHeight = this.cropHeight < 0 ? -size : size;
                    
                    this.drawCropOverlay();
                }
            }
            
            stopDrawing() {
                this.isDrawing = false;
            }
            
            drawCropOverlay() {
                if (!this.cropCanvas || !this.ctx || !this.originalImage) return;
                
                this.ctx.clearRect(0, 0, this.cropCanvas.width, this.cropCanvas.height);
                this.ctx.drawImage(this.originalImage, 0, 0, this.cropCanvas.width, this.cropCanvas.height);
                
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                this.ctx.fillRect(0, 0, this.cropCanvas.width, this.cropCanvas.height);
                
                this.ctx.clearRect(this.cropStartX, this.cropStartY, this.cropWidth, this.cropHeight);
                
                this.ctx.strokeStyle = '#4361ee';
                this.ctx.lineWidth = 2;
                this.ctx.setLineDash([5, 5]);
                this.ctx.strokeRect(this.cropStartX, this.cropStartY, this.cropWidth, this.cropHeight);
                this.ctx.setLineDash([]);
            }
            
            saveCrop() {
                if (!this.isCropping || !this.cropCanvas || !this.originalImage) return;
                
                const croppedCanvas = document.createElement('canvas');
                const croppedCtx = croppedCanvas.getContext('2d');
                
                const size = 400;
                croppedCanvas.width = size;
                croppedCanvas.height = size;
                
                const scaleX = this.originalImage.width / this.cropCanvas.width;
                const scaleY = this.originalImage.height / this.cropCanvas.height;
                
                const sourceX = this.cropStartX * scaleX;
                const sourceY = this.cropStartY * scaleY;
                const sourceWidth = Math.abs(this.cropWidth) * scaleX;
                const sourceHeight = Math.abs(this.cropHeight) * scaleY;
                
                croppedCtx.drawImage(
                    this.originalImage,
                    sourceX, sourceY, sourceWidth, sourceHeight,
                    0, 0, size, size
                );
                
                if (this.imagePreview) {
                    this.imagePreview.src = croppedCanvas.toDataURL('image/jpeg', 0.9);
                }
                
                this.ctx.clearRect(0, 0, this.cropCanvas.width, this.cropCanvas.height);
                this.ctx.drawImage(croppedCanvas, 0, 0, this.cropCanvas.width, this.cropCanvas.height);
                
                this.isCropping = false;
                if (this.cropContainer) this.cropContainer.style.display = 'none';
                if (this.imagePreview) this.imagePreview.style.display = 'block';
                
                this.croppedImageData = croppedCanvas.toDataURL('image/jpeg', 0.9);
            }
            
            cancelCrop() {
                this.isCropping = false;
                if (this.cropContainer) this.cropContainer.style.display = 'none';
                if (this.imagePreview) this.imagePreview.style.display = 'block';
            }
            
            getCroppedImage() {
                return this.croppedImageData;
            }
            
            showToast(message, type) {
                if (window.authManager) {
                    window.authManager.showToast(message, type);
                } else {
                    alert(message);
                }
            }
        }

        // ===== APPLICATION MANAGER =====
        class AppManager {
            constructor() {
                this.currentSection = 'home';
                this.sections = document.querySelectorAll('.content-section, .dashboard-section');
                this.navLinks = document.querySelectorAll('.nav-link');
                this.currentConfirmAction = null;
                this.init();
            }
            
            init() {
                this.initNavigation();
                this.initDashboard();
                this.initDataLoaders();
                this.initFilters();
                this.initForms();
                this.setCurrentYear();
                this.fixButtonTypes();
                
                if (typeof AOS !== 'undefined') {
                    AOS.init({ duration: 1000, once: true, offset: 100 });
                }
                
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loading-screen');
                    if (loadingScreen) {
                        loadingScreen.style.display = 'none';
                    }
                }, 1000);
            }
            
            fixButtonTypes() {
                document.querySelectorAll('button[type="submit"]').forEach(btn => {
                    if (!btn.id || (btn.id !== 'login-submit-btn' && btn.id !== 'register-submit-btn' && 
                        btn.id !== 'forgot-password-submit-btn' && btn.id !== 'verify-otp-btn' &&
                        btn.id !== 'change-password-btn' &&
                        !btn.closest('#add-project-form') && !btn.closest('#add-publication-form') &&
                        !btn.closest('#add-achievement-form') && !btn.closest('#add-topper-form') &&
                        !btn.closest('#add-notice-form') && !btn.closest('#contact-form') &&
                        !btn.closest('#student-edit-form') && !btn.closest('#faculty-edit-form') &&
                        !btn.closest('#admin-settings-form') && !btn.closest('#newsletter-form'))) {
                        btn.type = 'button';
                    }
                });
            }
            
            initNavigation() {
                this.navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.dataset.section;
                        this.showSection(section);
                        
                        this.navLinks.forEach(nl => nl.classList.remove('active'));
                        link.classList.add('active');
                        
                        const navMenu = document.getElementById('nav-menu');
                        if (navMenu && navMenu.classList.contains('active')) {
                            this.toggleMobileMenu();
                        }
                    });
                });
                
                const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
                if (mobileMenuToggle) {
                    mobileMenuToggle.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.toggleMobileMenu();
                    });
                }
                
                window.addEventListener('scroll', () => this.handleScroll());
            }
            
            toggleMobileMenu() {
                const navMenu = document.getElementById('nav-menu');
                const toggle = document.getElementById('mobile-menu-toggle');
                if (navMenu) navMenu.classList.toggle('active');
                if (toggle) toggle.classList.toggle('active');
            }
            
            handleScroll() {
                const navbar = document.getElementById('navbar');
                if (navbar) {
                    if (window.scrollY > 100) {
                        navbar.style.background = 'var(--bg-primary)';
                        navbar.style.boxShadow = 'var(--shadow)';
                    } else {
                        navbar.style.background = 'transparent';
                        navbar.style.boxShadow = 'none';
                    }
                }
            }
            
            showSection(sectionId) {
                this.sections.forEach(section => section.classList.remove('active'));
                
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.add('active');
                    this.currentSection = sectionId;
                    
                    this.loadSectionData(sectionId);
                    
                    window.history.pushState(null, null, `#${sectionId}`);
                    
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }
            
            initDashboard() {
                document.querySelectorAll('.sidebar-menu a').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.dataset.section;
                        
                        document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
                        link.classList.add('active');
                        
                        this.showSection(section);
                    });
                });
                
                document.querySelectorAll('.dashboard-sidebar').forEach(sidebar => {
                    sidebar.addEventListener('click', (e) => {
                        if (window.innerWidth <= 1200) {
                            sidebar.classList.toggle('active');
                        }
                    });
                });
            }
            
            initDataLoaders() {
                this.loadStats();
                this.loadAboutData();
                this.loadPrograms();
                this.loadContactInfo();
                this.loadFacultyData();
                this.loadProjectsData();
                this.loadEventsData();
                this.loadToppersData();
                this.loadNotices();
                
                const sectionLoaders = {
                    'student-dashboard': () => this.loadStudentDashboard(),
                    'student-profile': () => this.loadStudentProfile(),
                    'student-projects': () => this.loadStudentProjects(),
                    'student-achievements': () => this.loadStudentAchievements(),
                    'student-events': () => this.loadStudentEvents(),
                    'faculty-dashboard': () => this.loadFacultyDashboard(),
                    'faculty-profile': () => this.loadFacultyProfile(),
                    'faculty-students': () => this.loadFacultyStudents(),
                    'faculty-projects': () => this.loadFacultyProjects(),
                    'faculty-publications': () => this.loadFacultyPublications(),
                    'admin-dashboard': () => this.loadAdminDashboard(),
                    'admin-users': () => this.loadAdminUsers(),
                    'admin-faculty': () => this.loadAdminFaculty(),
                    'admin-programs': () => this.loadAdminPrograms(),
                    'admin-projects': () => this.loadAdminProjects(),
                    'admin-events': () => this.loadAdminEvents(),
                    'admin-toppers': () => this.loadAdminToppers(),
                    'admin-notices': () => this.loadAdminNotices(),
                    'admin-messages': () => this.loadAdminMessages(),
                    'admin-settings': () => this.loadAdminSettings()
                };
                
                this.sectionLoaders = sectionLoaders;
            }
            
            loadSectionData(sectionId) {
                const loader = this.sectionLoaders[sectionId];
                if (loader) loader();
            }
            
            async loadStats() {
                try {
                    const response = await fetch(`${API_BASE_URL}/stats`);
                    const data = await response.json();
                    
                    if (response.ok) {
                        this.updateStats(data);
                        this.animateCounters();
                    }
                } catch (error) {
                    console.error('Error loading stats:', error);
                }
            }
            
            updateStats(stats) {
                const counters = [
                    { id: 'count-students', value: stats.students || 0 },
                    { id: 'count-faculty', value: stats.faculty || 0 },
                    { id: 'count-projects', value: stats.projects || 0 },
                    { id: 'count-placement', value: stats.placement || 0 }
                ];
                
                counters.forEach(counter => {
                    const element = document.getElementById(counter.id);
                    if (element) {
                        element.setAttribute('data-count', counter.value);
                        element.textContent = counter.value;
                    }
                });
            }
            
            animateCounters() {
                const counters = document.querySelectorAll('.stat-number');
                let animated = false;
                
                const animate = () => {
                    if (animated) return;
                    
                    counters.forEach(counter => {
                        const target = parseInt(counter.getAttribute('data-count') || '0');
                        const duration = 2000;
                        const step = target / (duration / 16);
                        let current = 0;
                        
                        const update = () => {
                            current += step;
                            if (current < target) {
                                counter.textContent = Math.ceil(current);
                                requestAnimationFrame(update);
                            } else {
                                counter.textContent = target;
                            }
                        };
                        
                        update();
                    });
                    
                    animated = true;
                };
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            animate();
                        }
                    });
                }, { threshold: 0.5 });
                
                const statsSection = document.querySelector('.hero-stats');
                if (statsSection) observer.observe(statsSection);
            }
            
            async loadAboutData() {
                try {
                    const response = await fetch(`${API_BASE_URL}/about`);
                    const data = await response.json();
                    
                    if (response.ok) {
                        const universityInfo = document.getElementById('university-info');
                        const departmentInfo = document.getElementById('department-info');
                        const visionInfo = document.getElementById('vision-info');
                        const missionInfo = document.getElementById('mission-info');
                        const heroDescription = document.getElementById('hero-description');
                        const footerDescription = document.getElementById('footer-description');
                        
                        if (universityInfo) universityInfo.textContent = data.university || 'University of Technology & Sciences';
                        if (departmentInfo) departmentInfo.textContent = data.department || 'Department of Computer Science & Engineering';
                        if (visionInfo) visionInfo.textContent = data.vision || 'To be a center of excellence in Computer Science education and research.';
                        if (missionInfo) missionInfo.textContent = data.mission || 'To provide quality education in Computer Science, foster innovation through research.';
                        if (heroDescription) heroDescription.textContent = data.description || 'Empowering students with cutting-edge technology education and research opportunities.';
                        if (footerDescription) footerDescription.textContent = data.description || 'Empowering students with cutting-edge technology education and research opportunities.';
                    }
                } catch (error) {
                    console.error('Error loading about data:', error);
                }
            }
            
            async loadPrograms() {
                try {
                    const response = await fetch(`${API_BASE_URL}/programs`);
                    const data = await response.json();
                    
                    if (response.ok && data.length > 0) {
                        const programsGrid = document.getElementById('programs-grid');
                        const footerPrograms = document.getElementById('footer-programs');
                        
                        if (programsGrid) {
                            programsGrid.innerHTML = data.map(program => `
                                <div class="program-card" data-aos="fade-up">
                                    <div class="program-header">
                                        <i class="fas ${program.icon || 'fa-laptop-code'}"></i>
                                        <h4>${program.name}</h4>
                                    </div>
                                    <div class="program-details">
                                        <p>${program.description || ''}</p>
                                        <ul>
                                            ${program.highlights ? program.highlights.map(h => `<li>${h}</li>`).join('') : ''}
                                        </ul>
                                        <div class="program-stats">
                                            <span><i class="fas fa-clock"></i> ${program.duration || '4 Years'}</span>
                                            <span><i class="fas fa-users"></i> ${program.seats || 60} Seats</span>
                                        </div>
                                    </div>
                                </div>
                            `).join('');
                        }
                        
                        if (footerPrograms) {
                            footerPrograms.innerHTML = data.map(program => `
                                <li><a href="#about" data-section="about">${program.name}</a></li>
                            `).join('');
                        }
                    }
                } catch (error) {
                    console.error('Error loading programs:', error);
                }
            }
            
            async loadFacultyData() {
                try {
                    const response = await fetch(`${API_BASE_URL}/faculty`);
                    const data = await response.json();
                    
                    if (response.ok && data.length > 0) {
                        const facultyGrid = document.getElementById('faculty-grid');
                        
                        if (facultyGrid) {
                            facultyGrid.innerHTML = data.map(member => `
                                <div class="faculty-card" data-aos="fade-up">
                                    <img src="${member.image || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(member.name) + '&background=4361ee&color=fff'}" alt="${member.name}" class="faculty-image">
                                    <div class="faculty-info">
                                        <h3 class="faculty-name">${member.name}</h3>
                                        <p class="faculty-designation">${member.designation}</p>
                                        <p class="faculty-qualification">${member.qualification}</p>
                                        <div class="faculty-expertise">
                                            ${member.expertise ? member.expertise.map(exp => `<span class="expertise-tag">${exp}</span>`).join('') : ''}
                                        </div>
                                        <div class="faculty-social">
                                            ${member.linkedin ? `<a href="${member.linkedin}" target="_blank"><i class="fab fa-linkedin"></i></a>` : ''}
                                            ${member.email ? `<a href="mailto:${member.email}"><i class="fas fa-envelope"></i></a>` : ''}
                                        </div>
                                    </div>
                                </div>
                            `).join('');
                        }
                    }
                } catch (error) {
                    console.error('Error loading faculty:', error);
                }
            }
            
            async loadProjectsData() {
                try {
                    const response = await fetch(`${API_BASE_URL}/projects`);
                    const data = await response.json();
                    
                    if (response.ok && data.length > 0) {
                        const projectsGrid = document.getElementById('projects-grid');
                        
                        if (projectsGrid) {
                            projectsGrid.innerHTML = data.map(project => `
                                <div class="project-card" data-category="${project.category}" data-aos="fade-up">
                                    <img src="${project.image || 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=200&fit=crop'}" alt="${project.title}" class="project-image">
                                    <div class="project-info">
                                        <h3 class="project-title">${project.title}</h3>
                                        <p class="project-category">${project.category}</p>
                                        <p class="project-description">${project.description}</p>
                                        <div class="project-tech">
                                            ${project.technologies ? project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('') : ''}
                                        </div>
                                        <div class="project-links">
                                            ${project.github ? `<a href="${project.github}" class="project-link" target="_blank"><i class="fab fa-github"></i> View Code</a>` : ''}
                                            ${project.demo ? `<a href="${project.demo}" class="project-link" target="_blank"><i class="fas fa-external-link-alt"></i> Live Demo</a>` : ''}
                                        </div>
                                    </div>
                                </div>
                            `).join('');
                        }
                    }
                } catch (error) {
                    console.error('Error loading projects:', error);
                }
            }
            
            async loadEventsData() {
                try {
                    const response = await fetch(`${API_BASE_URL}/events`);
                    const data = await response.json();
                    
                    if (response.ok && data.length > 0) {
                        const now = new Date();
                        const upcoming = data.filter(event => new Date(event.date) >= now);
                        const past = data.filter(event => new Date(event.date) < now);
                        
                        const eventsContent = document.getElementById('events-content');
                        if (eventsContent) {
                            eventsContent.innerHTML = `
                                <div class="events-list" data-tab="upcoming" style="display: block;">
                                    ${upcoming.map(event => this.createEventCard(event)).join('')}
                                </div>
                                <div class="events-list" data-tab="past" style="display: none;">
                                    ${past.map(event => this.createEventCard(event)).join('')}
                                </div>
                                <div class="events-list" data-tab="all" style="display: none;">
                                    ${data.map(event => this.createEventCard(event)).join('')}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading events:', error);
                }
            }
            
            createEventCard(event) {
                const date = new Date(event.date);
                const day = date.getDate();
                const month = date.toLocaleString('default', { month: 'short' });
                
                return `
                    <div class="event-card" data-aos="fade-up">
                        <div class="event-date">
                            <div class="event-day">${day}</div>
                            <div class="event-month">${month}</div>
                        </div>
                        <div class="event-details">
                            <h4>${event.title}</h4>
                            <div class="event-time">
                                <i class="fas fa-clock"></i> ${event.time}
                            </div>
                            <div class="event-location">
                                <i class="fas fa-map-marker-alt"></i> ${event.location}
                            </div>
                            <p class="event-description">${event.description}</p>
                            <div class="event-actions">
                                <button class="btn btn-outline" onclick="window.app.registerForEvent('${event.id}')">Register</button>
                                ${event.link ? `<a href="${event.link}" class="btn btn-primary" target="_blank">Learn More</a>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            async loadToppersData() {
                try {
                    const response = await fetch(`${API_BASE_URL}/toppers`);
                    const data = await response.json();
                    
                    if (response.ok && data.length > 0) {
                        const years = [...new Set(data.map(t => t.academicYear))].filter(Boolean).sort().reverse();
                        const yearFilter = document.getElementById('academic-year-filter');
                        if (yearFilter) {
                            yearFilter.innerHTML = '<option value="">All Academic Years</option>' +
                                years.map(year => `<option value="${year}">${year}</option>`).join('');
                        }
                        
                        this.renderToppers(data);
                    }
                } catch (error) {
                    console.error('Error loading toppers:', error);
                }
            }
            
            renderToppers(toppers) {
                const toppersGrid = document.getElementById('toppers-grid');
                
                if (toppersGrid) {
                    toppersGrid.innerHTML = toppers.map((topper, index) => `
                        <div class="topper-card" data-year="${topper.academicYear}" data-course="${topper.course}" data-aos="fade-up">
                            <div class="topper-badge">${index + 1}</div>
                            <img src="${topper.image || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(topper.name) + '&background=4361ee&color=fff'}" alt="${topper.name}" class="topper-image">
                            <div class="topper-info">
                                <h3 class="topper-name">${topper.name}</h3>
                                <p class="topper-course">${topper.course}</p>
                                <div class="topper-cgpa">${topper.cgpa} CGPA</div>
                                <p class="topper-achievements">${topper.achievements || 'Outstanding academic performance'}</p>
                                <div class="topper-social">
                                    ${topper.linkedin ? `<a href="${topper.linkedin}" target="_blank"><i class="fab fa-linkedin"></i></a>` : ''}
                                    ${topper.github ? `<a href="${topper.github}" target="_blank"><i class="fab fa-github"></i></a>` : ''}
                                    ${topper.email ? `<a href="mailto:${topper.email}"><i class="fas fa-envelope"></i></a>` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            }
            
            async loadNotices() {
                try {
                    const response = await fetch(`${API_BASE_URL}/notices`);
                    const data = await response.json();
                    
                    if (response.ok && data.length > 0) {
                        const noticesContainer = document.getElementById('notices-container');
                        if (noticesContainer) {
                            noticesContainer.innerHTML = data.map(notice => `
                                <div class="notice-item ${notice.isImportant ? 'important' : ''}">
                                    <div class="notice-icon">
                                        <i class="fas ${notice.isImportant ? 'fa-exclamation-circle' : 'fa-bullhorn'}"></i>
                                    </div>
                                    <div class="notice-content">
                                        <h4>${notice.title}</h4>
                                        ${notice.description ? `<p>${notice.description}</p>` : ''}
                                        <div class="notice-meta">
                                            <span><i class="fas fa-tag"></i> ${notice.category || 'General'}</span>
                                            <span><i class="fas fa-calendar"></i> ${new Date(notice.createdAt).toLocaleDateString()}</span>
                                            ${notice.filePath ? `<a href="${notice.filePath}" target="_blank" class="notice-download"><i class="fas fa-download"></i> Download</a>` : ''}
                                        </div>
                                    </div>
                                </div>
                            `).join('');
                        }
                    }
                } catch (error) {
                    console.error('Error loading notices:', error);
                }
            }
            
            async loadContactInfo() {
                try {
                    const response = await fetch(`${API_BASE_URL}/about`);
                    const data = await response.json();
                    
                    if (response.ok) {
                        const contactInfo = document.getElementById('contact-info');
                        if (contactInfo) {
                            contactInfo.innerHTML = `
                                <div class="contact-card" data-aos="fade-up">
                                    <div class="contact-icon">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </div>
                                    <h4>Visit Us</h4>
                                    <p>${data.address || 'University Campus, Tech City'}</p>
                                </div>
                                <div class="contact-card" data-aos="fade-up" data-aos-delay="100">
                                    <div class="contact-icon">
                                        <i class="fas fa-phone"></i>
                                    </div>
                                    <h4>Call Us</h4>
                                    <p>${data.phone || '+91-123-456-7890'}</p>
                                </div>
                                <div class="contact-card" data-aos="fade-up" data-aos-delay="200">
                                    <div class="contact-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <h4>Email Us</h4>
                                    <p>${data.email || 'cse.department@university.edu'}</p>
                                </div>
                                <div class="contact-card" data-aos="fade-up" data-aos-delay="300">
                                    <div class="contact-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <h4>Office Hours</h4>
                                    <p>${data.hours || 'Mon-Fri: 9:00 AM - 5:00 PM'}</p>
                                </div>
                            `;
                        }
                        
                        // Update social links
                        const socialLinks = document.getElementById('social-links');
                        if (socialLinks) {
                            socialLinks.innerHTML = '';
                            if (data.facebook) socialLinks.innerHTML += `<a href="${data.facebook}" class="social-link" target="_blank"><i class="fab fa-facebook"></i></a>`;
                            if (data.twitter) socialLinks.innerHTML += `<a href="${data.twitter}" class="social-link" target="_blank"><i class="fab fa-twitter"></i></a>`;
                            if (data.linkedin) socialLinks.innerHTML += `<a href="${data.linkedin}" class="social-link" target="_blank"><i class="fab fa-linkedin"></i></a>`;
                            if (data.youtube) socialLinks.innerHTML += `<a href="${data.youtube}" class="social-link" target="_blank"><i class="fab fa-youtube"></i></a>`;
                            if (data.instagram) socialLinks.innerHTML += `<a href="${data.instagram}" class="social-link" target="_blank"><i class="fab fa-instagram"></i></a>`;
                        }
                    }
                } catch (error) {
                    console.error('Error loading contact info:', error);
                }
            }
            
            async loadStudentDashboard() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'student') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/dashboard`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const studentWelcomeName = document.getElementById('student-welcome-name');
                        if (studentWelcomeName) {
                            studentWelcomeName.textContent = window.authManager.currentUser.fullName;
                        }
                        
                        document.getElementById('student-cgpa').textContent = data.cgpa || 'N/A';
                        document.getElementById('student-attendance').textContent = (data.attendance || 0) + '%';
                        document.getElementById('student-project-count').textContent = data.projects || 0;
                        document.getElementById('student-event-count').textContent = data.events || 0;
                        
                        const recentProjects = document.getElementById('recent-projects-list');
                        if (recentProjects) {
                            if (data.recentProjects && data.recentProjects.length > 0) {
                                recentProjects.innerHTML = data.recentProjects.map(project => `
                                    <div class="list-item">
                                        <h4>${project.title}</h4>
                                        <p>${project.category}</p>
                                        <small>${project.isApproved ? 'Approved' : 'Pending'}</small>
                                    </div>
                                `).join('');
                            } else {
                                recentProjects.innerHTML = '<p>No projects yet</p>';
                            }
                        }
                        
                        const upcomingEvents = document.getElementById('upcoming-events-list');
                        if (upcomingEvents) {
                            if (data.upcomingEvents && data.upcomingEvents.length > 0) {
                                upcomingEvents.innerHTML = data.upcomingEvents.map(event => `
                                    <div class="list-item">
                                        <h4>${event.title}</h4>
                                        <p>${new Date(event.date).toLocaleDateString()} • ${event.time}</p>
                                        <small>${event.location}</small>
                                    </div>
                                `).join('');
                            } else {
                                upcomingEvents.innerHTML = '<p>No upcoming events</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading student dashboard:', error);
                }
            }
            
            async loadStudentProfile() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'student') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/profile`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('student-profile-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="profile-header">
                                    <img src="${data.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(data.fullName) + '&background=4361ee&color=fff'}" alt="Profile" class="profile-avatar">
                                    <div class="profile-info">
                                        <h2>${data.fullName}</h2>
                                        <span class="profile-badge">${data.course || 'Student'}</span>
                                        <p><i class="fas fa-envelope"></i> ${data.email}</p>
                                        <p><i class="fas fa-id-card"></i> ${data.registrationNo || 'N/A'}</p>
                                    </div>
                                </div>
                                
                                <div class="profile-details">
                                    <div class="detail-group">
                                        <h4>Personal Information</h4>
                                        <div class="detail-item">
                                            <span class="detail-label">Date of Birth</span>
                                            <span class="detail-value">${data.dateOfBirth || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Gender</span>
                                            <span class="detail-value">${data.gender || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Phone</span>
                                            <span class="detail-value">${data.phone || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Address</span>
                                            <span class="detail-value">${data.address || 'N/A'}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="detail-group">
                                        <h4>Academic Information</h4>
                                        <div class="detail-item">
                                            <span class="detail-label">Registration No</span>
                                            <span class="detail-value">${data.registrationNo || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Course</span>
                                            <span class="detail-value">${data.course || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Year</span>
                                            <span class="detail-value">${data.year || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Semester</span>
                                            <span class="detail-value">${data.semester || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">CGPA</span>
                                            <span class="detail-value">${data.cgpa || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Attendance</span>
                                            <span class="detail-value">${data.attendance || '0'}%</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Caste</span>
                                            <span class="detail-value">${data.caste || 'N/A'}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="detail-group">
                                    <h4>Achievements</h4>
                                    <div class="achievements-list">
                                        ${data.achievements && data.achievements.length > 0 ?
                                            data.achievements.map(ach => `
                                                <div class="achievement-item">
                                                    <h5>${ach.title}</h5>
                                                    <p>${ach.description}</p>
                                                    <small>${ach.category} • ${ach.date || 'N/A'}</small>
                                                </div>
                                            `).join('') :
                                            '<p>No achievements yet</p>'
                                        }
                                    </div>
                                </div>
                            `;
                        }
                        
                        // Populate edit form
                        document.getElementById('edit-fullname').value = data.fullName || '';
                        document.getElementById('edit-email').value = data.email || '';
                        document.getElementById('edit-phone').value = data.phone || '';
                        document.getElementById('edit-dob').value = data.dateOfBirth || '';
                        document.getElementById('edit-gender').value = data.gender || '';
                        document.getElementById('edit-address').value = data.address || '';
                        document.getElementById('edit-registration').value = data.registrationNo || '';
                        document.getElementById('edit-course').value = data.course || '';
                        document.getElementById('edit-year').value = data.year || '';
                        document.getElementById('edit-semester').value = data.semester || '';
                        document.getElementById('edit-caste').value = data.caste || '';
                        
                        const avatarPreview = document.getElementById('profile-avatar-preview');
                        if (avatarPreview) {
                            avatarPreview.src = data.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(data.fullName) + '&background=4361ee&color=fff';
                        }
                    }
                } catch (error) {
                    console.error('Error loading student profile:', error);
                }
            }
            
            async loadStudentProjects() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'student') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/projects`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const projectsGrid = document.getElementById('student-projects-grid');
                        if (projectsGrid) {
                            if (data.length > 0) {
                                projectsGrid.innerHTML = data.map(project => `
                                    <div class="project-card">
                                        <img src="${project.image || 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=200&fit=crop'}" alt="${project.title}" class="project-image">
                                        <div class="project-info">
                                            <h3 class="project-title">${project.title}</h3>
                                            <p class="project-category">${project.category}</p>
                                            <p class="project-description">${project.description}</p>
                                            <div class="project-tech">
                                                ${project.technologies ? project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('') : ''}
                                            </div>
                                            <div class="project-status">
                                                <span class="badge ${project.isApproved ? 'badge-success' : 'badge-warning'}">
                                                    ${project.isApproved ? 'Approved' : 'Pending Approval'}
                                                </span>
                                            </div>
                                            <div class="project-links">
                                                ${project.github ? `<a href="${project.github}" class="project-link" target="_blank"><i class="fab fa-github"></i></a>` : ''}
                                                ${project.demo ? `<a href="${project.demo}" class="project-link" target="_blank"><i class="fas fa-external-link-alt"></i></a>` : ''}
                                            </div>
                                        </div>
                                    </div>
                                `).join('');
                            } else {
                                projectsGrid.innerHTML = '<p class="text-center">No projects yet. Click "Add New Project" to create one.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading student projects:', error);
                }
            }
            
            async loadStudentAchievements() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'student') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/achievements`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const achievementsGrid = document.getElementById('achievements-grid');
                        if (achievementsGrid) {
                            if (data.length > 0) {
                                achievementsGrid.innerHTML = data.map(ach => `
                                    <div class="achievement-card">
                                        <div class="achievement-icon">
                                            <i class="fas fa-trophy"></i>
                                        </div>
                                        <h4>${ach.title}</h4>
                                        <p>${ach.description}</p>
                                        <small>${ach.category} • ${ach.date || 'N/A'}</small>
                                    </div>
                                `).join('');
                            } else {
                                achievementsGrid.innerHTML = '<p class="text-center">No achievements yet. Click "Add Achievement" to add one.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading achievements:', error);
                }
            }
            
            async loadStudentEvents() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'student') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/events/my-events`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const eventsContent = document.getElementById('student-events-content');
                        if (eventsContent) {
                            if (data.length > 0) {
                                eventsContent.innerHTML = data.map(event => `
                                    <div class="event-card">
                                        <div class="event-date">
                                            <div class="event-day">${new Date(event.date).getDate()}</div>
                                            <div class="event-month">${new Date(event.date).toLocaleString('default', { month: 'short' })}</div>
                                        </div>
                                        <div class="event-details">
                                            <h4>${event.title}</h4>
                                            <div class="event-time"><i class="fas fa-clock"></i> ${event.time}</div>
                                            <div class="event-location"><i class="fas fa-map-marker-alt"></i> ${event.location}</div>
                                            <div class="event-status">
                                                <span class="badge badge-success">${event.status}</span>
                                            </div>
                                            <small>Registered on: ${new Date(event.registeredAt).toLocaleDateString()}</small>
                                        </div>
                                    </div>
                                `).join('');
                            } else {
                                eventsContent.innerHTML = '<p class="text-center">You haven\'t registered for any events yet.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading student events:', error);
                }
            }
            
            async loadFacultyDashboard() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'teacher') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/dashboard`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const facultyWelcomeName = document.getElementById('faculty-welcome-name');
                        if (facultyWelcomeName) {
                            facultyWelcomeName.textContent = window.authManager.currentUser.fullName;
                        }
                        
                        document.getElementById('faculty-student-count').textContent = data.students || 0;
                        document.getElementById('faculty-project-count').textContent = data.projects || 0;
                        document.getElementById('faculty-publication-count').textContent = data.publications || 0;
                    }
                } catch (error) {
                    console.error('Error loading faculty dashboard:', error);
                }
            }
            
            async loadFacultyProfile() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'teacher') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/profile`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('faculty-profile-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="profile-header">
                                    <img src="${data.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(data.fullName) + '&background=4361ee&color=fff'}" alt="Profile" class="profile-avatar">
                                    <div class="profile-info">
                                        <h2>${data.fullName}</h2>
                                        <span class="profile-badge">${data.designation || 'Faculty'}</span>
                                        <p><i class="fas fa-envelope"></i> ${data.email}</p>
                                        <p><i class="fas fa-graduation-cap"></i> ${data.qualification || 'N/A'}</p>
                                    </div>
                                </div>
                                
                                <div class="profile-details">
                                    <div class="detail-group">
                                        <h4>Professional Information</h4>
                                        <div class="detail-item">
                                            <span class="detail-label">Employee ID</span>
                                            <span class="detail-value">${data.employeeId || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Designation</span>
                                            <span class="detail-value">${data.designation || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Qualification</span>
                                            <span class="detail-value">${data.qualification || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Experience</span>
                                            <span class="detail-value">${data.experience || 0} years</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Specialization</span>
                                            <span class="detail-value">${data.specialization || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Research Interests</span>
                                            <span class="detail-value">${data.researchInterests || 'N/A'}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="detail-group">
                                        <h4>Contact Information</h4>
                                        <div class="detail-item">
                                            <span class="detail-label">Phone</span>
                                            <span class="detail-value">${data.phone || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Office</span>
                                            <span class="detail-value">${data.office || 'N/A'}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Office Hours</span>
                                            <span class="detail-value">${data.officeHours || 'N/A'}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                ${data.bio ? `
                                    <div class="detail-group">
                                        <h4>Bio</h4>
                                        <p>${data.bio}</p>
                                    </div>
                                ` : ''}
                                
                                <div class="detail-group">
                                    <h4>Publications</h4>
                                    <div class="publications-list">
                                        ${data.publications && data.publications.length > 0 ?
                                            data.publications.map(pub => `
                                                <div class="publication-item">
                                                    <h5>${pub.title}</h5>
                                                    <p>${pub.authors} • ${pub.journal} (${pub.year})</p>
                                                    ${pub.doi ? `<small>DOI: ${pub.doi}</small>` : ''}
                                                    ${pub.link ? `<a href="${pub.link}" target="_blank">View Publication</a>` : ''}
                                                </div>
                                            `).join('') :
                                            '<p>No publications yet</p>'
                                        }
                                    </div>
                                </div>
                            `;
                        }
                        
                        // Populate edit form
                        document.getElementById('edit-faculty-name').value = data.fullName || '';
                        document.getElementById('edit-faculty-email').value = data.email || '';
                        document.getElementById('edit-faculty-phone').value = data.phone || '';
                        document.getElementById('edit-faculty-dob').value = data.dateOfBirth || '';
                        document.getElementById('edit-faculty-designation').value = data.designation || '';
                        document.getElementById('edit-faculty-qualification').value = data.qualification || '';
                        document.getElementById('edit-faculty-experience').value = data.experience || '';
                        document.getElementById('edit-faculty-specialization').value = data.specialization || '';
                        document.getElementById('edit-faculty-research').value = data.researchInterests || '';
                        document.getElementById('edit-faculty-bio').value = data.bio || '';
                        document.getElementById('edit-faculty-office').value = data.office || '';
                        document.getElementById('edit-faculty-office-hours').value = data.officeHours || '';
                        document.getElementById('edit-faculty-linkedin').value = data.linkedin || '';
                        document.getElementById('edit-faculty-googlescholar').value = data.googleScholar || '';
                        
                        const facultyAvatarPreview = document.getElementById('faculty-avatar-preview');
                        if (facultyAvatarPreview) {
                            facultyAvatarPreview.src = data.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(data.fullName) + '&background=4361ee&color=fff';
                        }
                    }
                } catch (error) {
                    console.error('Error loading faculty profile:', error);
                }
            }
            
            async loadFacultyStudents() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'teacher') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/students`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('faculty-students-content');
                        if (content) {
                            if (data.length > 0) {
                                content.innerHTML = `
                                    <div class="students-grid">
                                        ${data.map(student => `
                                            <div class="student-card">
                                                <img src="${student.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(student.name) + '&background=4361ee&color=fff'}" alt="${student.name}" class="student-image">
                                                <h4>${student.name}</h4>
                                                <p>${student.registrationNo}</p>
                                                <p>${student.course} • Year ${student.year}</p>
                                                <p>CGPA: ${student.cgpa || 'N/A'}</p>
                                                <a href="mailto:${student.email}" class="btn btn-outline">Contact</a>
                                            </div>
                                        `).join('')}
                                    </div>
                                `;
                            } else {
                                content.innerHTML = '<p class="text-center">No students found</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading faculty students:', error);
                }
            }
            
            async loadFacultyProjects() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'teacher') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/projects`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const projectsGrid = document.getElementById('faculty-projects-grid');
                        if (projectsGrid) {
                            if (data.length > 0) {
                                projectsGrid.innerHTML = data.map(project => `
                                    <div class="project-card">
                                        <img src="${project.image || 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=200&fit=crop'}" alt="${project.title}" class="project-image">
                                        <div class="project-info">
                                            <h3 class="project-title">${project.title}</h3>
                                            <p class="project-category">${project.category}</p>
                                            <p class="project-description">${project.description}</p>
                                            <div class="project-tech">
                                                ${project.technologies ? project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('') : ''}
                                            </div>
                                            <div class="project-links">
                                                ${project.github ? `<a href="${project.github}" class="project-link" target="_blank"><i class="fab fa-github"></i></a>` : ''}
                                                ${project.demo ? `<a href="${project.demo}" class="project-link" target="_blank"><i class="fas fa-external-link-alt"></i></a>` : ''}
                                            </div>
                                        </div>
                                    </div>
                                `).join('');
                            } else {
                                projectsGrid.innerHTML = '<p class="text-center">No projects yet. Click "Add New Project" to create one.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading faculty projects:', error);
                }
            }
            
            async loadFacultyPublications() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'teacher') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/publications`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const publicationsGrid = document.getElementById('publications-grid');
                        if (publicationsGrid) {
                            if (data.length > 0) {
                                publicationsGrid.innerHTML = data.map(pub => `
                                    <div class="publication-card">
                                        <h4>${pub.title}</h4>
                                        <p>${pub.authors}</p>
                                        <p>${pub.journal} (${pub.year})</p>
                                        ${pub.doi ? `<p>DOI: ${pub.doi}</p>` : ''}
                                        ${pub.link ? `<a href="${pub.link}" target="_blank" class="btn btn-outline">View Publication</a>` : ''}
                                    </div>
                                `).join('');
                            } else {
                                publicationsGrid.innerHTML = '<p class="text-center">No publications yet. Click "Add Publication" to add one.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading faculty publications:', error);
                }
            }
            
            async loadAdminDashboard() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/dashboard`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const adminWelcomeName = document.getElementById('admin-welcome-name');
                        if (adminWelcomeName) {
                            adminWelcomeName.textContent = window.authManager.currentUser.fullName;
                        }
                        
                        document.getElementById('admin-total-users').textContent = data.stats?.totalUsers || 0;
                        document.getElementById('admin-total-students').textContent = data.stats?.totalStudents || 0;
                        document.getElementById('admin-total-teachers').textContent = data.stats?.totalTeachers || 0;
                        document.getElementById('admin-total-projects').textContent = data.stats?.totalProjects || 0;
                        document.getElementById('admin-pending-projects').textContent = data.stats?.pendingProjects || 0;
                        document.getElementById('admin-upcoming-events').textContent = data.stats?.upcomingEvents || 0;
                        document.getElementById('admin-unread-messages').textContent = data.stats?.unreadMessages || 0;
                    }
                } catch (error) {
                    console.error('Error loading admin dashboard:', error);
                }
            }
            
            async loadAdminUsers() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/users`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('admin-users-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="content-header">
                                    <h2>Users (${data.total || 0})</h2>
                                </div>
                                <div class="table-container">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>User</th>
                                                <th>Email</th>
                                                <th>Role</th>
                                                <th>Status</th>
                                                <th>Joined</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${data.users.map(user => `
                                                <tr>
                                                    <td>
                                                        <div class="user-info">
                                                            <img src="${user.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.fullName) + '&background=4361ee&color=fff'}" alt="${user.fullName}" class="user-avatar-small">
                                                            ${user.fullName}
                                                        </div>
                                                    </td>
                                                    <td>${user.email}</td>
                                                    <td><span class="badge badge-info">${user.role}</span></td>
                                                    <td>
                                                        <span class="badge ${user.isVerified ? 'badge-success' : 'badge-warning'}">${user.isVerified ? 'Verified' : 'Pending'}</span>
                                                        <span class="badge ${user.isActive ? 'badge-success' : 'badge-danger'}">${user.isActive ? 'Active' : 'Inactive'}</span>
                                                    </td>
                                                    <td>${user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}</td>
                                                    <td class="table-actions">
                                                        <button class="btn btn-outline btn-sm" onclick="window.app.editUser('${user.id}')">Edit</button>
                                                        <button class="btn btn-danger btn-sm" onclick="window.app.deleteUser('${user.id}')">Delete</button>
                                                    </td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin users:', error);
                }
            }
            
            async loadAdminFaculty() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/faculty-members`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('admin-faculty-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="content-header">
                                    <h2>Faculty Members</h2>
                                    <button class="btn btn-primary" onclick="window.app.showAddFacultyModal()">
                                        <i class="fas fa-plus"></i> Add Faculty
                                    </button>
                                </div>
                                <div class="faculty-grid">
                                    ${data.map(faculty => `
                                        <div class="faculty-card">
                                            <img src="${faculty.image || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(faculty.name) + '&background=4361ee&color=fff'}" alt="${faculty.name}" class="faculty-image">
                                            <div class="faculty-info">
                                                <h3 class="faculty-name">${faculty.name}</h3>
                                                <p class="faculty-designation">${faculty.designation}</p>
                                                <p class="faculty-qualification">${faculty.qualification}</p>
                                                <div class="faculty-expertise">
                                                    ${faculty.expertise ? faculty.expertise.map(exp => `<span class="expertise-tag">${exp}</span>`).join('') : ''}
                                                </div>
                                                <div class="table-actions">
                                                    <button class="btn btn-outline btn-sm" onclick="window.app.editFaculty('${faculty.id}')">Edit</button>
                                                    <button class="btn btn-danger btn-sm" onclick="window.app.deleteFaculty('${faculty.id}')">Delete</button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin faculty:', error);
                }
            }
            
            async loadAdminPrograms() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/programs`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('admin-programs-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="content-header">
                                    <h2>Programs</h2>
                                    <button class="btn btn-primary" onclick="window.app.showAddProgramModal()">
                                        <i class="fas fa-plus"></i> Add Program
                                    </button>
                                </div>
                                <div class="programs-grid">
                                    ${data.map(program => `
                                        <div class="program-card">
                                            <div class="program-header">
                                                <i class="fas ${program.icon || 'fa-laptop-code'}"></i>
                                                <h4>${program.name}</h4>
                                            </div>
                                            <div class="program-details">
                                                <p>${program.description || ''}</p>
                                                <ul>
                                                    ${program.highlights ? program.highlights.map(h => `<li>${h}</li>`).join('') : ''}
                                                </ul>
                                                <div class="program-stats">
                                                    <span><i class="fas fa-clock"></i> ${program.duration || '4 Years'}</span>
                                                    <span><i class="fas fa-users"></i> ${program.seats || 60} Seats</span>
                                                </div>
                                                <div class="table-actions">
                                                    <button class="btn btn-outline btn-sm" onclick="window.app.editProgram('${program.id}')">Edit</button>
                                                    <button class="btn btn-danger btn-sm" onclick="window.app.deleteProgram('${program.id}')">Delete</button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin programs:', error);
                }
            }
            
            async loadAdminProjects() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/projects`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('admin-projects-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="content-header">
                                    <h2>Projects (${data.total || 0})</h2>
                                    <button class="btn btn-primary" onclick="window.app.showAddProjectModal()">
                                        <i class="fas fa-plus"></i> Add Project
                                    </button>
                                </div>
                                <div class="projects-grid">
                                    ${data.projects.map(project => `
                                        <div class="project-card">
                                            <img src="${project.image || 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=200&fit=crop'}" alt="${project.title}" class="project-image">
                                            <div class="project-info">
                                                <h3 class="project-title">${project.title}</h3>
                                                <p class="project-category">${project.category}</p>
                                                <p class="project-description">${project.description}</p>
                                                <div class="project-tech">
                                                    ${project.technologies ? project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('') : ''}
                                                </div>
                                                <div class="project-status">
                                                    <span class="badge ${project.isApproved ? 'badge-success' : 'badge-warning'}">${project.isApproved ? 'Approved' : 'Pending'}</span>
                                                </div>
                                                <div class="table-actions">
                                                    ${!project.isApproved ? `<button class="btn btn-success btn-sm" onclick="window.app.approveProject('${project.id}')">Approve</button>` : ''}
                                                    <button class="btn btn-danger btn-sm" onclick="window.app.deleteProject('${project.id}')">Delete</button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin projects:', error);
                }
            }
            
            async loadAdminEvents() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/events`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('admin-events-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="content-header">
                                    <h2>Events (${data.total || 0})</h2>
                                    <button class="btn btn-primary" onclick="window.app.showAddEventModal()">
                                        <i class="fas fa-plus"></i> Add Event
                                    </button>
                                </div>
                                <div class="events-list">
                                    ${data.events.map(event => `
                                        <div class="event-card">
                                            <div class="event-date">
                                                <div class="event-day">${new Date(event.date).getDate()}</div>
                                                <div class="event-month">${new Date(event.date).toLocaleString('default', { month: 'short' })}</div>
                                            </div>
                                            <div class="event-details">
                                                <h4>${event.title}</h4>
                                                <div class="event-time"><i class="fas fa-clock"></i> ${event.time}</div>
                                                <div class="event-location"><i class="fas fa-map-marker-alt"></i> ${event.location}</div>
                                                <p class="event-description">${event.description}</p>
                                                <div class="event-actions">
                                                    <span class="badge ${event.isActive ? 'badge-success' : 'badge-danger'}">${event.isActive ? 'Active' : 'Inactive'}</span>
                                                </div>
                                                <div class="table-actions">
                                                    <button class="btn btn-outline btn-sm" onclick="window.app.editEvent('${event.id}')">Edit</button>
                                                    <button class="btn btn-danger btn-sm" onclick="window.app.deleteEvent('${event.id}')">Delete</button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin events:', error);
                }
            }
            
            async loadAdminToppers() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/toppers`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const toppersGrid = document.getElementById('admin-toppers-grid');
                        if (toppersGrid) {
                            if (data.length > 0) {
                                toppersGrid.innerHTML = data.map((topper, index) => `
                                    <div class="topper-card">
                                        <div class="topper-badge">${index + 1}</div>
                                        <img src="${topper.image || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(topper.name) + '&background=4361ee&color=fff'}" alt="${topper.name}" class="topper-image">
                                        <div class="topper-info">
                                            <h3 class="topper-name">${topper.name}</h3>
                                            <p class="topper-course">${topper.course}</p>
                                            <div class="topper-cgpa">${topper.cgpa} CGPA</div>
                                            <p class="topper-achievements">${topper.achievements || ''}</p>
                                            <div class="table-actions">
                                                <button class="btn btn-outline btn-sm" onclick="window.app.editTopper('${topper.id}')">Edit</button>
                                                <button class="btn btn-danger btn-sm" onclick="window.app.deleteTopper('${topper.id}')">Delete</button>
                                            </div>
                                        </div>
                                    </div>
                                `).join('');
                            } else {
                                toppersGrid.innerHTML = '<p class="text-center">No toppers yet. Click "Add Topper" to add one.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin toppers:', error);
                }
            }
            
            async loadAdminNotices() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/notices`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const noticesGrid = document.getElementById('admin-notices-grid');
                        if (noticesGrid) {
                            if (data.notices && data.notices.length > 0) {
                                noticesGrid.innerHTML = data.notices.map(notice => `
                                    <div class="notice-card ${notice.isImportant ? 'important' : ''}">
                                        <h4>${notice.title}</h4>
                                        <p>${notice.description || ''}</p>
                                        <small>Category: ${notice.category}</small>
                                        ${notice.filePath ? `<a href="${notice.filePath}" target="_blank">View Attachment</a>` : ''}
                                        <div class="notice-meta">
                                            <span>Views: ${notice.views}</span>
                                            <span>Valid: ${notice.validFrom || 'N/A'} - ${notice.validUntil || 'N/A'}</span>
                                        </div>
                                        <div class="table-actions">
                                            <button class="btn btn-outline btn-sm" onclick="window.app.editNotice('${notice.id}')">Edit</button>
                                            <button class="btn btn-danger btn-sm" onclick="window.app.deleteNotice('${notice.id}')">Delete</button>
                                        </div>
                                    </div>
                                `).join('');
                            } else {
                                noticesGrid.innerHTML = '<p class="text-center">No notices yet. Click "Add Notice" to add one.</p>';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin notices:', error);
                }
            }
            
            async loadAdminMessages() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/messages`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        const content = document.getElementById('admin-messages-content');
                        if (content) {
                            content.innerHTML = `
                                <div class="content-header">
                                    <h2>Messages (${data.unreadCount || 0} unread)</h2>
                                </div>
                                <div class="messages-list">
                                    ${data.messages.map(message => `
                                        <div class="message-card ${!message.isRead ? 'unread' : ''}">
                                            <div class="message-header">
                                                <h4>${message.name}</h4>
                                                <span class="message-date">${new Date(message.createdAt).toLocaleDateString()}</span>
                                            </div>
                                            <p><strong>Email:</strong> ${message.email}</p>
                                            <p><strong>Subject:</strong> ${message.subject}</p>
                                            <p>${message.message}</p>
                                            <div class="message-actions">
                                                <span class="badge ${message.isRead ? 'badge-success' : 'badge-warning'}">${message.isRead ? 'Read' : 'Unread'}</span>
                                                <span class="badge ${message.isReplied ? 'badge-success' : 'badge-warning'}">${message.isReplied ? 'Replied' : 'Pending'}</span>
                                                <button class="btn btn-outline btn-sm" onclick="window.app.replyToMessage('${message.id}')">Reply</button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    console.error('Error loading admin messages:', error);
                }
            }
            
            async loadAdminSettings() {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/department-info`, { headers });
                    const data = await response.json();
                    
                    if (response.ok) {
                        document.getElementById('admin-university').value = data.university || '';
                        document.getElementById('admin-department').value = data.department || '';
                        document.getElementById('admin-address').value = data.address || '';
                        document.getElementById('admin-phone').value = data.phone || '';
                        document.getElementById('admin-email').value = data.email || '';
                        document.getElementById('admin-office-hours').value = data.hours || '';
                        document.getElementById('admin-established').value = data.establishedYear || '';
                        document.getElementById('admin-accreditation').value = data.accreditation || '';
                        document.getElementById('admin-facebook').value = data.facebook || '';
                        document.getElementById('admin-twitter').value = data.twitter || '';
                        document.getElementById('admin-linkedin').value = data.linkedin || '';
                        document.getElementById('admin-youtube').value = data.youtube || '';
                        document.getElementById('admin-instagram').value = data.instagram || '';
                        document.getElementById('admin-vision').value = data.vision || '';
                        document.getElementById('admin-mission').value = data.mission || '';
                        document.getElementById('admin-description').value = data.description || '';
                        document.getElementById('admin-placement').value = data.placementPercentage || '';
                    }
                } catch (error) {
                    console.error('Error loading admin settings:', error);
                }
            }
            
            initFilters() {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.filterProjects(btn.dataset.filter);
                    });
                });
                
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.filterEvents(btn.dataset.tab);
                    });
                });
                
                const academicYearFilter = document.getElementById('academic-year-filter');
                const courseFilter = document.getElementById('course-filter');
                
                if (academicYearFilter) {
                    academicYearFilter.addEventListener('change', () => this.filterToppers());
                }
                if (courseFilter) {
                    courseFilter.addEventListener('change', () => this.filterToppers());
                }
            }
            
            filterProjects(filter) {
                const projects = document.querySelectorAll('.project-card');
                projects.forEach(project => {
                    if (filter === 'all' || project.dataset.category === filter) {
                        project.style.display = 'block';
                    } else {
                        project.style.display = 'none';
                    }
                });
            }
            
            filterEvents(tab) {
                const eventLists = document.querySelectorAll('.events-list');
                eventLists.forEach(list => {
                    list.style.display = list.dataset.tab === tab ? 'block' : 'none';
                });
            }
            
            filterToppers() {
                const year = document.getElementById('academic-year-filter')?.value;
                const course = document.getElementById('course-filter')?.value;
                const toppers = document.querySelectorAll('.topper-card');
                
                toppers.forEach(topper => {
                    const yearMatch = !year || topper.dataset.year === year;
                    const courseMatch = !course || topper.dataset.course === course;
                    
                    topper.style.display = yearMatch && courseMatch ? 'block' : 'none';
                });
            }
            
            initForms() {
                // Contact form
                const contactForm = document.getElementById('contact-form');
                if (contactForm) {
                    contactForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleContactForm(e);
                    });
                }
                
                // Newsletter form
                const newsletterForm = document.getElementById('newsletter-form');
                if (newsletterForm) {
                    newsletterForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleNewsletterForm(e);
                    });
                }
                
                // Student edit form
                const studentEditForm = document.getElementById('student-edit-form');
                const cancelEdit = document.getElementById('cancel-edit');
                
                if (studentEditForm) {
                    studentEditForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleStudentEdit(e);
                    });
                }
                if (cancelEdit) {
                    cancelEdit.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showSection('student-profile');
                    });
                }
                
                // Faculty edit form
                const facultyEditForm = document.getElementById('faculty-edit-form');
                const cancelFacultyEdit = document.getElementById('cancel-faculty-edit');
                
                if (facultyEditForm) {
                    facultyEditForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleFacultyEdit(e);
                    });
                }
                if (cancelFacultyEdit) {
                    cancelFacultyEdit.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showSection('faculty-profile');
                    });
                }
                
                // Admin settings form
                const adminSettingsForm = document.getElementById('admin-settings-form');
                if (adminSettingsForm) {
                    adminSettingsForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAdminSettings(e);
                    });
                }
                
                // Add project form
                const addProjectForm = document.getElementById('add-project-form');
                if (addProjectForm) {
                    addProjectForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddProject(e);
                    });
                }
                
                // Faculty add project form
                const facultyAddProjectForm = document.getElementById('faculty-add-project-form');
                if (facultyAddProjectForm) {
                    facultyAddProjectForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleFacultyAddProject(e);
                    });
                }
                
                // Add publication form
                const addPublicationForm = document.getElementById('add-publication-form');
                if (addPublicationForm) {
                    addPublicationForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddPublication(e);
                    });
                }
                
                // Add achievement form
                const addAchievementForm = document.getElementById('add-achievement-form');
                if (addAchievementForm) {
                    addAchievementForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddAchievement(e);
                    });
                }
                
                // Add topper form
                const addTopperForm = document.getElementById('add-topper-form');
                if (addTopperForm) {
                    addTopperForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddTopper(e);
                    });
                }
                
                // Add faculty form
                const addFacultyForm = document.getElementById('add-faculty-form');
                if (addFacultyForm) {
                    addFacultyForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddFaculty(e);
                    });
                }
                
                // Add program form
                const addProgramForm = document.getElementById('add-program-form');
                if (addProgramForm) {
                    addProgramForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddProgram(e);
                    });
                }
                
                // Add event form
                const addEventForm = document.getElementById('add-event-form');
                if (addEventForm) {
                    addEventForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddEvent(e);
                    });
                }
                
                // Add notice form
                const addNoticeForm = document.getElementById('add-notice-form');
                if (addNoticeForm) {
                    addNoticeForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleAddNotice(e);
                    });
                }
                
                // Avatar uploads
                const avatarUpload = document.getElementById('avatar-upload');
                if (avatarUpload) {
                    avatarUpload.addEventListener('change', (e) => {
                        this.handleAvatarUpload(e, 'profile-avatar-preview');
                    });
                }
                
                const facultyAvatarUpload = document.getElementById('faculty-avatar-upload');
                if (facultyAvatarUpload) {
                    facultyAvatarUpload.addEventListener('change', (e) => {
                        this.handleAvatarUpload(e, 'faculty-avatar-preview');
                    });
                }
                
                // Explore button
                const exploreBtn = document.getElementById('explore-btn');
                if (exploreBtn) {
                    exploreBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showSection('about');
                        const aboutNav = document.querySelector('[data-section="about"]');
                        if (aboutNav) aboutNav.classList.add('active');
                    });
                }
            }
            
            async handleAvatarUpload(e, previewId) {
                const file = e.target.files[0];
                if (!file) return;
                
                if (!file.type.match('image.*')) {
                    window.authManager.showToast('Please select an image file', 'error');
                    return;
                }
                
                if (file.size > 5 * 1024 * 1024) {
                    window.authManager.showToast('Image size should be less than 5MB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (event) => {
                    const preview = document.getElementById(previewId);
                    if (preview) {
                        preview.src = event.target.result;
                    }
                };
                reader.readAsDataURL(file);
            }
            
            async handleContactForm(e) {
                const formData = new FormData(e.target);
                
                try {
                    const response = await fetch(`${API_BASE_URL}/contact/submit`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Message sent successfully!', 'success');
                        e.target.reset();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to send message', 'error');
                    }
                } catch (error) {
                    console.error('Contact form error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleNewsletterForm(e) {
                const email = document.getElementById('newsletter-email')?.value;
                
                if (!email) {
                    window.authManager.showToast('Please enter your email', 'error');
                    return;
                }
                
                const formData = new FormData();
                formData.append('email', email);
                
                try {
                    const response = await fetch(`${API_BASE_URL}/newsletter/subscribe`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Successfully subscribed!', 'success');
                        e.target.reset();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Subscription failed', 'error');
                    }
                } catch (error) {
                    console.error('Newsletter error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleStudentEdit(e) {
                if (!window.authManager.isAuthenticated) return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/profile`, {
                        method: 'PUT',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Profile updated successfully!', 'success');
                        this.showSection('student-profile');
                        this.loadStudentProfile();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to update profile', 'error');
                    }
                } catch (error) {
                    console.error('Edit profile error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleFacultyEdit(e) {
                if (!window.authManager.isAuthenticated) return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/profile`, {
                        method: 'PUT',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Profile updated successfully!', 'success');
                        this.showSection('faculty-profile');
                        this.loadFacultyProfile();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to update profile', 'error');
                    }
                } catch (error) {
                    console.error('Edit faculty profile error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAdminSettings(e) {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/department-info`, {
                        method: 'PUT',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Settings updated successfully!', 'success');
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to update settings', 'error');
                    }
                } catch (error) {
                    console.error('Update settings error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddProject(e) {
                if (!window.authManager.isAuthenticated) return;
                
                const formData = new FormData(e.target);
                
                // Handle technologies array
                const technologies = document.getElementById('project-technologies')?.value;
                if (technologies) {
                    const techArray = technologies.split(',').map(t => t.trim());
                    formData.append('technologies', JSON.stringify(techArray));
                }
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/projects`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Project added successfully! Pending approval.', 'success');
                        this.closeModal('add-project-modal');
                        this.loadStudentProjects();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add project', 'error');
                    }
                } catch (error) {
                    console.error('Add project error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleFacultyAddProject(e) {
                if (!window.authManager.isAuthenticated) return;
                
                const formData = new FormData(e.target);
                
                // Handle technologies array
                const technologies = document.getElementById('faculty-project-technologies')?.value;
                if (technologies) {
                    const techArray = technologies.split(',').map(t => t.trim());
                    formData.append('technologies', JSON.stringify(techArray));
                }
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/projects`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Project added successfully!', 'success');
                        this.closeModal('faculty-add-project-modal');
                        this.loadFacultyProjects();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add project', 'error');
                    }
                } catch (error) {
                    console.error('Add project error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddPublication(e) {
                if (!window.authManager.isAuthenticated) return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/faculty/publications`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Publication added successfully!', 'success');
                        this.closeModal('add-publication-modal');
                        this.loadFacultyPublications();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add publication', 'error');
                    }
                } catch (error) {
                    console.error('Add publication error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddAchievement(e) {
                if (!window.authManager.isAuthenticated) return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/achievements`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Achievement added successfully!', 'success');
                        this.closeModal('add-achievement-modal');
                        this.loadStudentAchievements();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add achievement', 'error');
                    }
                } catch (error) {
                    console.error('Add achievement error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddTopper(e) {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/toppers`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Topper added successfully!', 'success');
                        this.closeModal('add-topper-modal');
                        this.loadAdminToppers();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add topper', 'error');
                    }
                } catch (error) {
                    console.error('Add topper error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddFaculty(e) {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                const formData = new FormData(e.target);
                
                // Handle expertise array
                const expertise = document.getElementById('faculty-expertise')?.value;
                if (expertise) {
                    const expertiseArray = expertise.split(',').map(e => e.trim());
                    formData.append('expertise', JSON.stringify(expertiseArray));
                }
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/faculty-members`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Faculty added successfully!', 'success');
                        this.closeModal('add-faculty-modal');
                        this.loadAdminFaculty();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add faculty', 'error');
                    }
                } catch (error) {
                    console.error('Add faculty error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddProgram(e) {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                const formData = new FormData(e.target);
                
                // Handle highlights array
                const highlights = document.getElementById('program-highlights')?.value;
                if (highlights) {
                    const highlightsArray = highlights.split('\n').map(h => h.trim()).filter(h => h);
                    formData.append('highlights', JSON.stringify(highlightsArray));
                }
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/programs`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Program added successfully!', 'success');
                        this.closeModal('add-program-modal');
                        this.loadAdminPrograms();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add program', 'error');
                    }
                } catch (error) {
                    console.error('Add program error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddEvent(e) {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                const formData = new FormData(e.target);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/events`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Event added successfully!', 'success');
                        this.closeModal('add-event-modal');
                        this.loadAdminEvents();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add event', 'error');
                    }
                } catch (error) {
                    console.error('Add event error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async handleAddNotice(e) {
                if (!window.authManager.isAuthenticated || window.authManager.currentUser.role !== 'admin') return;
                
                const formData = new FormData(e.target);
                
                // Handle checkbox
                formData.append('isImportant', document.getElementById('notice-important')?.checked ? 'true' : 'false');
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/notices`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Notice added successfully!', 'success');
                        this.closeModal('add-notice-modal');
                        this.loadAdminNotices();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to add notice', 'error');
                    }
                } catch (error) {
                    console.error('Add notice error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async registerForEvent(eventId) {
                if (!window.authManager.isAuthenticated) {
                    window.authManager.openModal('login-modal');
                    window.authManager.showToast('Please login to register for events', 'info');
                    return;
                }
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/student/events/register/${eventId}`, {
                        method: 'POST',
                        headers
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Successfully registered for event!', 'success');
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to register for event', 'error');
                    }
                } catch (error) {
                    console.error('Event registration error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            setCurrentYear() {
                const currentYear = document.getElementById('current-year');
                if (currentYear) {
                    currentYear.textContent = new Date().getFullYear();
                }
            }
            
            // Modal methods
            showAddAchievementModal() {
                window.authManager.openModal('add-achievement-modal');
            }
            
            showAddTopperModal() {
                window.authManager.openModal('add-topper-modal');
            }
            
            showAddNoticeModal() {
                window.authManager.openModal('add-notice-modal');
            }
            
            showAddFacultyModal() {
                window.authManager.openModal('add-faculty-modal');
            }
            
            showAddProgramModal() {
                window.authManager.openModal('add-program-modal');
            }
            
            showAddProjectModal() {
                window.authManager.openModal('add-project-modal');
            }
            
            showAddEventModal() {
                window.authManager.openModal('add-event-modal');
            }
            
            showChangePasswordModal() {
                window.authManager.openModal('change-password-modal');
            }
            
            // CRUD methods
            async editUser(userId) {
                window.authManager.showToast('Edit user functionality coming soon', 'info');
            }
            
            async deleteUser(userId) {
                this.confirmAction('Delete User', 'Are you sure you want to delete this user?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/users/${userId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'User deleted successfully!', 'success');
                            this.loadAdminUsers();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete user', 'error');
                        }
                    } catch (error) {
                        console.error('Delete user error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async editFaculty(facultyId) {
                window.authManager.showToast('Edit faculty functionality coming soon', 'info');
            }
            
            async deleteFaculty(facultyId) {
                this.confirmAction('Delete Faculty', 'Are you sure you want to delete this faculty member?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/faculty-members/${facultyId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'Faculty member deleted successfully!', 'success');
                            this.loadAdminFaculty();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete faculty member', 'error');
                        }
                    } catch (error) {
                        console.error('Delete faculty error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async editProgram(programId) {
                window.authManager.showToast('Edit program functionality coming soon', 'info');
            }
            
            async deleteProgram(programId) {
                this.confirmAction('Delete Program', 'Are you sure you want to delete this program?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/programs/${programId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'Program deleted successfully!', 'success');
                            this.loadAdminPrograms();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete program', 'error');
                        }
                    } catch (error) {
                        console.error('Delete program error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async approveProject(projectId) {
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/projects/${projectId}/approve`, {
                        method: 'PUT',
                        headers
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Project approved successfully!', 'success');
                        this.loadAdminProjects();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to approve project', 'error');
                    }
                } catch (error) {
                    console.error('Approve project error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async deleteProject(projectId) {
                this.confirmAction('Delete Project', 'Are you sure you want to delete this project?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/projects/${projectId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'Project deleted successfully!', 'success');
                            this.loadAdminProjects();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete project', 'error');
                        }
                    } catch (error) {
                        console.error('Delete project error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async editEvent(eventId) {
                window.authManager.showToast('Edit event functionality coming soon', 'info');
            }
            
            async deleteEvent(eventId) {
                this.confirmAction('Delete Event', 'Are you sure you want to delete this event?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/events/${eventId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'Event deleted successfully!', 'success');
                            this.loadAdminEvents();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete event', 'error');
                        }
                    } catch (error) {
                        console.error('Delete event error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async editTopper(topperId) {
                window.authManager.showToast('Edit topper functionality coming soon', 'info');
            }
            
            async deleteTopper(topperId) {
                this.confirmAction('Delete Topper', 'Are you sure you want to delete this topper?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/toppers/${topperId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'Topper deleted successfully!', 'success');
                            this.loadAdminToppers();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete topper', 'error');
                        }
                    } catch (error) {
                        console.error('Delete topper error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async editNotice(noticeId) {
                window.authManager.showToast('Edit notice functionality coming soon', 'info');
            }
            
            async deleteNotice(noticeId) {
                this.confirmAction('Delete Notice', 'Are you sure you want to delete this notice?', async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const response = await fetch(`${API_BASE_URL}/admin/notices/${noticeId}`, {
                            method: 'DELETE',
                            headers
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message || 'Notice deleted successfully!', 'success');
                            this.loadAdminNotices();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to delete notice', 'error');
                        }
                    } catch (error) {
                        console.error('Delete notice error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            async replyToMessage(messageId) {
                const reply = prompt('Enter your reply:');
                if (!reply) return;
                
                const formData = new FormData();
                formData.append('reply', reply);
                
                try {
                    const headers = window.authManager.getAuthHeaders();
                    const response = await fetch(`${API_BASE_URL}/admin/messages/${messageId}/reply`, {
                        method: 'POST',
                        headers: headers,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok) {
                        window.authManager.showToast(data.message || 'Reply sent successfully!', 'success');
                        this.loadAdminMessages();
                    } else {
                        window.authManager.showToast(data.detail || data.message || 'Failed to send reply', 'error');
                    }
                } catch (error) {
                    console.error('Reply error:', error);
                    window.authManager.showToast('Network error', 'error');
                }
            }
            
            async generateToppers() {
                const academicYear = prompt('Enter academic year (e.g., 2023-2024):');
                if (!academicYear) return;
                
                this.confirmAction('Generate Toppers', `Generate toppers for ${academicYear}?`, async () => {
                    try {
                        const headers = window.authManager.getAuthHeaders();
                        const formData = new FormData();
                        formData.append('academicYear', academicYear);
                        
                        const response = await fetch(`${API_BASE_URL}/admin/generate-toppers`, {
                            method: 'POST',
                            headers: headers,
                            body: formData
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            window.authManager.showToast(data.message, 'success');
                            this.loadAdminToppers();
                        } else {
                            window.authManager.showToast(data.detail || data.message || 'Failed to generate toppers', 'error');
                        }
                    } catch (error) {
                        console.error('Generate toppers error:', error);
                        window.authManager.showToast('Network error', 'error');
                    }
                });
            }
            
            confirmAction(title, message, action) {
                const modal = document.getElementById('confirm-modal');
                const confirmTitle = document.getElementById('confirm-title');
                const confirmMessage = document.getElementById('confirm-message');
                const confirmBtn = document.getElementById('confirm-action-btn');
                
                if (confirmTitle) confirmTitle.textContent = title;
                if (confirmMessage) confirmMessage.textContent = message;
                
                this.currentConfirmAction = action;
                
                const newConfirmBtn = confirmBtn.cloneNode(true);
                confirmBtn.parentNode.replaceChild(newConfirmBtn, confirmBtn);
                
                newConfirmBtn.addEventListener('click', () => {
                    if (this.currentConfirmAction) {
                        this.currentConfirmAction();
                    }
                    window.authManager.closeModal('confirm-modal');
                });
                
                window.authManager.openModal('confirm-modal');
            }
            
            showError(message) {
                window.authManager.showToast(message, 'error');
            }
        }

        // ===== INITIALIZE EVERYTHING =====
        document.addEventListener('DOMContentLoaded', () => {
            window.themeManager = new ThemeManager();
            window.authManager = new AuthManager();
            window.app = new AppManager();
            
            const profilePicInput = document.getElementById('profile-pic');
            if (profilePicInput) {
                window.imageEditor = new SimpleImageEditor();
            }
            
            const hash = window.location.hash.substring(1);
            if (hash && document.getElementById(hash)) {
                setTimeout(() => window.app.showSection(hash), 100);
            }
        });
    </script>
</body>
</html>
